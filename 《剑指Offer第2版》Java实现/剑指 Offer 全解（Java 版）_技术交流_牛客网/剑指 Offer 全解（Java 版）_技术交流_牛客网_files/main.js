(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{118:function(t,e,i){var n=i(2),o=i(6),a=i(3),s=i(10),r=i(0),c=i(8),l=i(58),d=i(27),u=i(24),p=i(4),f=i(60),h=i(61),m=i(54),v=i(17),g=i(142),y=i(14),w=i(28),b=i(39),C=t.exports=a.create();a.mix(C,o,{_template:['<div class="letter-content clearfix">','<div class="letter-item js-letter-name">','<label class="letter-label">发给</label>','<div class="btn-group"></div>',"</div>",'<div class="letter-item" style="margin-bottom:0;">','<label class="letter-label">内容</label>','<div class="btn-group js-ipt"></div>',"</div>",'<div class="letter-item letter-msg-box">','<div class="letter-pic-box">','<a href="javascript:void(0);" class="icon-emotion js-emoji-btn"></a>','<a href="javascript:void(0);" class="icon-pic js-upload-btn"></a>',"</div>","</div>",'<div class="letter-msg-box">','<div class="letter-pic-box js-upload"></div>',"</div>","</div>"].join(""),listeners:[{name:"render",type:"custom",handler:function(){this.getEl();this.initReceiver(),this.initContent(),this.initEmoji(),this.initImage(),this.popup.fixPosition()}},{name:"keydown textarea",handler:function(t){this.val(),n(t.currentTarget);var e=t.keyCode,i="macintosh"===(d.getOs()||{}).os;13===e&&(i&&t.metaKey||!i&&t.ctrlKey)&&(t.preventDefault(),this.check()&&this.sendMessage(),t.target.blur())}}],show:function(t){var e=new C(t);p.wrap(e,{title:t.title,content:e.html(),width:600,listeners:{close:function(){t.close&&t.close(),e.fire("close")}},okTxt:"发送",ok:function(){return e.check()&&e.sendMessage(),!0},cancel:function(){}});return e}},{initialize:function(t){this.receiver=t.receiver&&t.receiver.id?t.receiver:null,this.images=[]},initReceiver:function(){this.rawConfig;var t=this.receiver,e=this.getEl().find(".js-letter-name .btn-group");t&&t.id?e.html('<span class="recipient">'+(t.name||"未知姓名")+"</span>"):(this.receiverIpt=new u({renderTo:e,renderBy:"replaceWith",cls:"btn-group",placeholder:"请输入对方姓名，从下拉菜单中选择"}),this.initSuggest(),this.initRecent())},initSuggest:function(){var t=this,e=t.receiverIpt,i=h.show({input:e.inputEl,needSame:!0,selectCls:"hover",reqList:function(t,e){if(!(t=n.trim(t)))return e([]);w.queryUsers({body:{o:0,c:10,query:t},call:function(t){e(t.data)},error:function(t){e([])}})},getItemStr:function(t){return s.execTpl(['<li class="js-item suggest-user" data-id="#{_sid}">','<img class="list-head" src="#{head}">','<span class="list-name" title="#{nickname}">#{nickname}</span>',"</li>"].join(""),{_sid:t._sid,head:t.head||"//static.nowcoder.com/images/head.png",nickname:t.nickname})},ok:function(i){t.receiver={id:i.id,name:i.nickname},e.val(i.nickname)}});i.attach.listen("attachShow",(function(){e.setNone();var t=i.getEl();t.addClass("letter-content"),t.outerWidth(e.getEl().outerWidth())})),i.attach.listen("attachHide",(function(){t.receiver&&t.receiver.name!==e.val()&&(t.receiver=null)})),t.pushChild(i)},initRecent:function(){var t=this,e=t.getEl().find(".js-letter-name");w.queryRecentlyUsers({call:function(i){var o=i.data||[],a="";if(r.forEach(o,(function(t){a+=t.id?s.execTpl('<dd><a class="feed-head" data-id="#{id}" title="#{name}" href="javascript:void(0);"><img src="#{head}" /></a></dd>',t):""})),a){var c=n('<div class="letter-item"><label class="letter-label">最近发送</label><dl class="recently-sent" style="margin-left:0;padding-left:0;">'+a+"</dl></div>");e.after(c),c.find("dd a").on("click",(function(e){var i=n(e.currentTarget),o=i.attr("data-id"),a=n.trim(i.attr("title"));o&&(t.receiver={id:o,name:a},t.receiverIpt.val(a||"未知姓名"))})),t.popup.fixPosition()}}})},initContent:function(){var t=this.rawConfig,e=this.getEl();this.contentIpt=new u({renderTo:e.find(".js-ipt"),type:"textarea",render:function(){var t=this.inputEl;t.addClass("letter-txt"),t.css("resize","none").css("line-height","1.6"),this.getEl().outerWidth(Math.max(426,t.outerWidth()))}}),this.contentIpt.val(t.content)},initEmoji:function(){var t=this,e=t.getEl(),i=b.show({target:e.find(".js-emoji-btn"),call:function(e){b.renderInIpt(t.contentIpt.inputEl,e)}});i.pushChild(i)},initImage:function(){var t=this,e=t.getEl();if(!l.support)return void e.find(".js-upload-btn").remove();var i=v.getMainDomain(!0)+"/uploadImage?type=1",o=n(['<div class="letter-pic-box">','<ul class="js-upload-list clearfix">','<li class="add-more-pic js-upload" title="上传图片" style="display:none;"><i class="icon-plus"></i></li>',"</ul>","</div>"].join(""));e.find(".js-upload").append(o);o.find(".js-upload-list");var a=e.find(".js-upload-btn"),s=o.find("li.js-upload");g.create(i,(function(e,n){r.forEach([a,s],(function(e){var o=m.show({target:e,url:i,XMLHttpRequest:n.XMLHttpRequest,fileType:"*.jpg;*.JPG;*.png;*.PNG;*.gif;*.GIF;*.bmp;*.BMP;*.jpeg;*.JPEG",call:function(t){p(t.url)}});t.pushChild(o)}));var d,u=c.bindPaste(document,t.contentIpt.inputEl,(function(t){var e=r.find(t,(function(t){return"file"===t.kind&&/image/.test(t.type||"")})),o=e?e.getAsFile():null;o&&new l({url:i,XMLHttpRequest:n.XMLHttpRequest,progress:function(t){h().showProgress("正在上传："+t+"%",t)},error:function(){h().showError("上传失败")},call:function(t){h().close(),p(t.url)}}).uploadBlob(o,(new Date).getTime()+"."+o.type.split("/").pop())}));function p(i){(i=e.trim(i))&&(t.images.push(i),s[t.images.length>0?"show":"hide"](),s.before(["<li>",'<a href="javascript:void(0);" class="js-upload-del icon-remove-circle"></a>','<div class="mask"></div>','<img style="width:80px;height:80px;" src="'+i+'" />',"</li>"].join("")))}function h(){return d||(d=f.show({})).popup.listen("close",(function(){d=null})),d}t.listen("destroy",u),o.on("click","li .js-upload-del",(function(i){var n=e(i.currentTarget).closest("li"),o=e.trim(n.find("img").attr("src")),a=t.images.indexOf(o);a>=0&&t.images.splice(a,1),s[t.images.length>0?"show":"hide"](),n.remove()}))}))},val:function(){var t=this.rawConfig;return{type:0,title:"",content:n.trim(this.contentIpt.val()),receiver:(this.receiver||{}).id,images:this.images,majiaSender:r.isObject(t.sender)?t.sender.id:t.sender}},check:function(){var t=this.val();if(!t.receiver)return this.receiverIpt&&this.receiverIpt.setErrorTips("收信人不能为空"),!1;if(!t.content&&0===t.images.length)return this.contentIpt.setErrorTips("内容不能为空"),!1;return!0},sendMessage:function(){var t=this;if(t.needCode){i(114).show({type:y.captcha.sendMessage,call:function(i){t.needCode=!1,e(i)},cancel:function(){t.needCode=!1,p.alert("验证码错误")}})}else e();function e(e){t.val();w.sendMessage({body:t.val(),query:e||{},call:function(e){var i=t.rawConfig;t.popup.close(),!i.sentCb&&p.tips("发送成功"),i.sentCb&&i.sentCb()},error:function(e){if(1125===e.code)return t.needCode=!0,void t.sendMessage();p.alert(e.msg||"发送失败，请重试")}})}}})},13:function(t,e,i){var n=i(7);t.exports={url:{quitCircle:"/circle/quit",applyCircle:"/circle/apply",createCircle:"/circle/create",exploreCircle:"/circle/center/data",kickMember:"/circle/kick-out",operate:"/circle/operate",getCircleList:"/circle/circle-list",getTopFeed:"/circle/top-feed",stickyFeed:"/circle/set/top-feed",syncFeed:"/circle/set/to-feed"}},n.add(t.exports)},15:function(t,e,i){var n=i(7);t.exports={url:{newNote:"/note/new",editNote:"/note/edit/#{noteId}",delNote:"/note/del/#{noteId}",saveDraft:"/note/draft/new",delDraft:"/note/draft/delete",getNoteData:"/note/data",newestNotes:"/note/newest",queryNotes:"/note/query"}},n.add(t.exports,t.exports.url)},150:function(t,e,i){var n=i(2),o=i(0),a=i(19),s=i(59);t.exports={form:function(t,e){((t=t||{})instanceof n||t.nodeType&&t.nodeName)&&(t={el:t,call:e});var i=n(t.el),s=t.src;this.load((function(e,r){!s&&o.forEach(i,(function(t){r(t,{delimiters:[{left:"$$$$$$",right:"$$$$$$",display:!0},{left:"$$$",right:"$$$",display:!1},{left:"$$",right:"$$",display:!0},{left:"\\(",right:"\\)",display:!1},{left:"$",right:"$",display:!1},{left:"\\[",right:"\\]",display:!0}],errorCallback:function(t){o.out(t)}})})),s&&o.forEach(i.find("img"),(function(t){t=n(t);var i=n.trim(t.attr("src")),r=a.getParam(s,i);if(r){var c=r.replace(/^\s*?\\\[|\\\]\s*?$/gi,"");r.replace(/^\s*?\\\(|\\\)\s*?$/gi,""),r.replace(/^\s*?$$|$$\s*?$/gi,""),c=r.replace(/^\s*?$|$\s*?$/gi,"");try{var l=e.renderToString(c);t.replaceWith(l)}catch(d){o.out(d)}}})),t.call&&window.setTimeout(t.call,250)}))},image:function(t,e){((t=t||{})instanceof n||t.nodeType&&t.nodeName)&&(t={el:t,call:e}),!t.src&&(t.src="tex"),this.form(t)},load:function(t){t=t||{};var e=this;o.isFunction(t)&&(t={call:t});if(e.isLoad())return t.call&&t.call(window.katex,window.renderMathInElement);s.use(["//static.nowcoder.com/nc/jslib/katex@0.10.2/katex.min.css","//static.nowcoder.com/nc/jslib/katex@0.10.2/katex.min.js"],(function(){s.use("//static.nowcoder.com/nc/jslib/katex@0.10.2/contrib/auto-render.min.js",(function(){e.isLoad()&&t.call&&t.call(window.katex,window.renderMathInElement)}))}))},isLoad:function(){return!!(window.katex&&window.katex.render&&window.renderMathInElement)}}},155:function(t,e,i){var n=i(7);t.exports={url:{subjectSuggest:"/subject/query",createSubject:"/subject/create-subject",deleteSubjectRelation:"/subject/delete-subject-relation"}},n.add(t.exports)},16:function(t,e,i){var n=i(7);t.exports={url:{createMoment:"/moment/create",deleteMoment:"/moment/delete",createShare:"/share/create",deleteShare:"/share/delete"}},n.add(t.exports)},203:function(t,e,i){var n=i(2),o=i(6),a=i(18),s=i(3),r=(i(0),i(10),i(4)),c=i(24),l=(i(66),i(41)),d=i(28),u=t.exports=s.create();s.mix(u,o,{_template:['<div class="pop-blog">','<a href="javascript:void(0);" class="pop-close" title="关闭"></a>','<div class="pop-blog-notice">','<img src="https://uploadfiles.nowcoder.com/images/20190612/59_1560326890360_5D1A01F653D48D3D8D4FC1BC38C0C54F" alt="">',"<p>欢迎开通牛客博客</p>","</div>",'<div class="">','<div class="module-head clearfix">',"<h1>你的博客地址</h1>",'<span class="module-head-tips">地址确认后不再提供修改权限</span>',"</div>",'<div class="pop-blog-cont">',"<section>","<span>https://blog.nowcoder.net/</span>",'<div><input type="text" name="name" placeholder="博客个性地址" class="js-pop-url"></div>',"</section>",'<p class="pop-blog-txt">注意：可以是3-24位小写字母与数字的组合，不支持纯数字</p>',"</div>",'<label class="checkbox">','<span class="icons"></span>','<input type="checkbox">',"</label>",'<span style="color:#888;">确认开通牛客博客并遵守<a href="https://www.nowcoder.com/discuss/199171" class="link-green" target="_blank">《牛客博客用户协议》</a></span>',"</div>",'<div class="pop-btn-wrapper">','<a href="javascript:void(0);" class="btn btn-default">立即开通博客</a>',"</div>","</div>"].join(""),listeners:[{name:"render",type:"custom",handler:function(){this.initData()}},{name:"click a.btn",handler:function(t){var e=n(t.currentTarget),i=this.rawConfig;if(!this.agreeCheckbox.isChecked())return void r.tips("请先同意《牛客博客规定》");var o=n.trim(this.urlIpt.val());if(!/^[a-z0-9]{3,24}$/.test(o)||/^[0-9]+$/.test(o))return void this.urlIpt.setErrorTips("请输入3-24位小写字母与数字的组合，不支持纯数字");if(a.mark(e))return;d.blogOpen({body:{url:o},call:function(t){var e=i.returnUrl;!e&&i.getReturnUrl&&(e=i.getReturnUrl(o)),!e&&(e="https://blog.nowcoder.net/"+o),window.location.href=e},error:function(t){r.alert(t.msg)},always:function(){a.clear(e)}})}}],show:function(t){var e=new u(t=t||{});r.wrap(e,{hasNoTitle:!0,hasNoFooter:!0,width:680,content:e.html()});return e}},{initialize:function(t){},initData:function(){var t=this.getEl(),e=t.find("a.btn");this.urlIpt=c.transform(t.find(".js-pop-url").parent()),this.agreeCheckbox=l.transform(n("label.checkbox"),{listeners:{change:function(){e[this.isChecked()?"addClass":"removeClass"]("btn-primary"),e[this.isChecked()?"removeClass":"addClass"]("btn-default")}}})}})},204:function(t,e,i){var n=i(2),o=i(0),a=i(3),s=(i(12),i(10),t.exports=a.create());o.extend(s,{isSupport:!!window.getSelection}),o.extend(s.prototype,{initialize:function(t){this.rawConfig=t,this.currentSelection="",this.el=n(t.el),s.isSupport&&this.initSelect()},initSelect:function(){var t=this,e=t.rawConfig,i=t.el,o=!1,a=!1;function s(){a=!0,i.unbind("mousemove",s)}function r(){i.unbind("mousemove",s),i.unbind("mouseup",r);var c=o&&a;if(o=!1,a=!1,c){var l=window.getSelection(),d=n.trim(l.toString()),u=t.getSelectionEndPosition();if(d.length>2&&u){t.currentSelection=d;var p=u.x+window.scrollX,f=u.y+window.scrollY;e.call&&e.call({val:d,x:p,y:f})}}}i.on("mousedown",(function(){o=!0,a=!1,i.unbind("mousemove",s),i.unbind("mouseup",r),i.on("mousemove",s),i.on("mouseup",r)})),n(document).on("mousedown",(function(t){var i=n(t.target);(!e.canCancel||e.canCancel(i))&&e.cancel&&e.cancel()}))},val:function(){return this.currentSelection},getSelectionEndPosition:function(){var t=this.getSelectionRange();if(t&&!this.isSelectionInForm()){var e=t.endContainer,i=document.createRange();i.setStart(e,0),i.setEnd(e,t.endOffset);var n=i.getClientRects(),o=n.length;if(o>0){var a=n[o-1],s=o>1?n[o-2]:null,r=a.left===a.right&&s?s:a;return{x:r.right,y:r.bottom}}}},getSelectionRange:function(){var t=window.getSelection();return t.rangeCount?t.getRangeAt(0).cloneRange():null},isSelectionInForm:function(){var t=document.activeElement,e=t?(t.tagName||"").toLowerCase():"";return!(!e||!{input:1,textarea:1,select:1,button:1}[e])}})},21:function(t,e,i){var n=i(7);t.exports={domain:"feed.nowcoder.com",domainDev:"d.feed.nowcoder.com",url:{refresh:"/feed/refresh",getMore:"/feed/more",hasMore:"/feed/has-more",getLinkDetail:"/moment/outer-link",getFeedDetail:"/feed/detail",getTimeLine:"/feed/timeline",shieldFeed:"/feed/shield",deleteFeed:"/feed/delete",refreshCircle:"/feed/circle/refresh",getMoreCircle:"/feed/circle/more",hasMoreCircle:"/feed/circle/has-more",refreshSubject:"/feed/subject/refresh",getMoreSubject:"/feed/subject/more",hasMoreSubject:"/feed/subject/has-more"}},n.add(t.exports)},22:function(t,e,i){var n=i(2),o=i(0),a={weibo:{url:"http://service.weibo.com/share/share.php",param:{url:"",appkey:"",title:"",pic:"",ralateUid:"",language:"zh_cn"}},t163:{url:"http://t.163.com/article/user/checkLogin.do",param:{info:"",images:"",picSep:",",togImg:!0}},qzone:{url:"http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey",param:{desc:"",title:"",summary:"",url:"",site:"",pics:"",picSep:"|"}},tqq:{url:"http://share.v.t.qq.com/index.php",param:{c:"share",a:"index",site:"",url:"",title:"",pic:"",picSep:"|"}},fqq:{url:"http://connect.qq.com/widget/shareqq/index.html",param:{desc:"",title:"",summary:"",url:"",site:"",pics:""}},renren:{url:"http://widget.renren.com/dialog/share",param:{resourceUrl:"",pic:"",title:"",description:""}},kaixin:{url:"http://www.kaixin001.com/rest/records.php",param:{content:"",url:"",starid:"0",aid:"0",pic:"",style:"11",picSep:","}},douban:{url:"http://www.douban.com/recommend/",param:{title:"",url:"",v:"1"}},yixin:{url:"http://open.yixin.im/share",param:{appkey:"",type:"webpage",title:"1",desc:"",userdesc:"",pic:"",url:""}}};t.exports={bind:function(t){var e=this,i=t.attrName||"data-share";o.forEach(t.el,(function(o){var a=(o=n(o)).attr(i);if("weixin"===a)return t.clickWx&&t.clickWx();({weibo:1,t163:1,qzone:1,tqq:1,fqq:1,renren:1,kaixin:1,douban:1,yixin:1})[a]&&o.click((function(){e.share({target:a,title:t.title,desc:t.desc||"",pic:t.image||null,pics:t.image?[t.image]:null,link:t.link||window.location.href,site:t.account?"@"+t.account.replace(/^@/,""):"@牛客网",searchPic:t.searchPic})}))}))},share:function(t){var e=this.shareLink(t),i="",n=t.target;"douban"===n?i="toolbar=0,resizable=1,scrollbars=yes,status=1,width=450,height=330,left="+(window.screen.width-450)/2+",top="+(window.screen.height-330)/2:"yixin"===n&&(i="toolbar=0,resizable=1,scrollbars=yes,status=1,width=650,height=460,left="+(window.screen.width-650)/2+",top="+(window.screen.height-460)/2);i?window.open(e,n,i):window.open(e,"_blank")},shareLink:function(t){var e=t.target,i=t.pics||[],n=t.desc||"",s=t.title||"",r=t.link||"",c=t.site||"",l=t.appkey||"",d=t.userdesc||"",u=t.type||"",p=a[e],f=p.url,h=p.param||{},m=c?" 分享来自 "+c:"",v=s===n?"":n;/^\/\//.test(r)&&(r="http:"+r);var g={weibo:{appkey:l||"3023520088",url:r,title:s+v+m,pic:i[0]||"",searchPic:t.searchPic},t163:{info:s+v+r+m,images:i.join(h.picSep)},qq:{appkey:l||"101003590",title:s+v,url:r,site:c,pic:i.join(h.picSep)},qzone:{url:r,desc:n,title:s,pics:i.join(h.picSep),site:c,images:i.join(h.picSep)},fqq:{url:r,desc:n,title:s,pics:i.join(h.picSep),site:c,images:i.join(h.picSep)},renren:{resourceUrl:r,description:n+m,title:s,pic:i[0]||""},kaixin:{url:r,content:s+v+m,pic:i.join(h.picSep)},douban:{url:r,title:s+v+m},yixin:{appkey:l,type:u||"webpage",title:s,desc:n,userdesc:d,pic:i[0]||"",url:r}}[e];o.extend(h,g);var y=[];return o.forEach(h,(function(t,e){y.push(e+"="+window.encodeURIComponent(t||""))})),f+"?"+y.join("&")}}},23:function(t,e,i){"use strict";var n=i(21),o=i.n(n),a=i(2),s=i(54),r={},c={initUpload:function(t){var e=t.context;s.show({target:t.target,url:"/uploadImage?type=1&watermark=true",fileType:"*.jpg;*.png;*.gif;*.bmp;*.jpeg",isMultiple:!0,noProgress:!0,noError:!0,checkFile:function(t,i,n){return e.add(t)},progress:function(t,i,n,o){e.progress(o,t)},call:function(t,i){e.finish(i,t)},error:function(t,i){e.error(i)}})},getLinkDetail:function(t){var e=a.trim(t.link);if(r[e])return t.call&&t.call(r[e]);o.a.getLinkDetail({type:"GET",query:{url:e},call:function(i){var n=i.data.link;r[e]=n,t.call&&t.call(n)},error:function(e){t.call&&t.call()}})}};var l=i(0),d=i(3),u=i(60),p=d.create(),f=p;l.extend(p.prototype,{initialize:function(t){this.rawConfig=t||{},this.max=+t.max||0},add:function(t){var e=this,i=e.max,n=e.getList();if(!t)return{right:!1,msg:"错误的文件"};if(i&&n.length>=i)return{right:!1,msg:"图片超过最大上传数量"};e.update(t,(function(e,i,n){e.push({isLoading:!0,alt:t.name||"",file:t,id:l.key()})}));var o=new FileReader;o.onloadend=function(){var i=o.result;e.update(t,(function(t,e,n){e&&(e.dataUrl=i)}))},o.readAsDataURL(t)},progress:function(t,e){this.update(t,(function(t,i,n){i&&(i.progress=e)}))},finish:function(t,e){this.update(t,(function(t,i,n){if(i){var o=e.imageInfo||{};i.isLoading=!1,i.src=e.url,i.width=+(o.ImageWidth||{}).value||0,i.height=+(o.ImageHeight||{}).value||0}}))},error:function(t){u.show({}).showError("图片上传失败"),this.update(t,(function(t,e,i){i>=0&&t.splice(i,1)}))},getList:function(){return(this.rawConfig.getList()||[]).slice(0)},update:function(t,e){var i=this.rawConfig,n=this.getList(),o=l.findIndex(n,(function(e){return e.file===t})),a=o>=0?n[o]:null;e(n,a,o),i.update(n)}});var h=i(9),m=i.n(h),v=i(16),g=i.n(v);function y(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}var w=i(2),b=i(0),C=i(8),k=i(58),x=i(44),_=i(27),j=i(51);var T={props:["isReadonly","value","placeholder","upload","subjectRecord","atRecord"],data:function(){return{content:this.value}},mounted:function(){var t=this;t.$nextTick((function(){t.input=w(t.$refs.input),t.initInput(),t.initPasteImage()}))},methods:{initInput:function(){var t=this,e=w(t.$refs.input);C.txtAutoHeight({el:e}),x.input(e,{ok:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},i=e.id,n=i===undefined?"":i,o=e.nickname,a=o===undefined?"":o;t.$emit("update:atRecord",[].concat(y(t.atRecord),[{id:n,nickname:a}]))}}),j.input(e,{ok:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},i=e.id,n=i===undefined?"":i,o=e.content,a=o===undefined?"":o;t.$emit("update:subjectRecord",[].concat(y(t.subjectRecord),[{id:n,content:a}]))}})},initPasteImage:function(){var t=this.upload;if(!t)return;var e=this.$refs.input,i=C.bindPaste(document,e,(function(e,i){b.forEach(e,(function(e){if(e&&"file"===e.kind&&/image/.test(e.type||"")){var n=e?e.getAsFile():null,o=t.add(n);if(n&&(!o||o.right))i.preventDefault(),new k({url:"/uploadImage?type=1&watermark=true",progress:function(e){return t.progress(n,e)},error:function(){return t.error(n)},call:function(e){return t.finish(n,e)}}).uploadBlob(n,(new Date).getTime()+"."+n.type.split("/").pop())}}))}));this.$on("hook:destroy",i)},val:function(){return this.input.val()},focus:function(){var t=this;t.$nextTick((function(){return t.input.focus()}))},blur:function(){this.input.blur()},actionSend:function(t){var e="macintosh"===(_.getOs()||{}).os;(e&&t.metaKey||!e&&t.ctrlKey)&&(t.target.blur(),this.$emit("send"))}},watch:{value:function(t){this.content=t},content:function(t){var e=this;e.$emit("input",t),e.$nextTick((function(){C.dispatchEvent(e.input,"change")}))}}},I=i(1),E=Object(I.a)(T,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],ref:"input",attrs:{readonly:t.isReadonly,placeholder:t.placeholder},domProps:{value:t.content},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.actionSend(e)},input:function(e){e.target.composing||(t.content=e.target.value)}}})}),[],!1,null,null,null).exports,S={},L=Object(I.a)(S,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"publish-loading-tips"},[e("i",{staticClass:"icon-refresh"}),this._t("default")],2)}),[],!1,null,null,null).exports,$={},D=Object(I.a)($,(function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"publish-loading-tips"},[this._t("default")],2)}),[],!1,null,null,null).exports,P=i(12);var A={props:["value","isShow","lock"],components:{Loading:L,Error:D},data:function(){return{isLoading:!0,isLoaded:!1,data:null,error:"",lastTime:0}},methods:{update:function(){var t=this;t.updateVal();var e=new Date,i=e.getTime(),n=t.lastTime;(!n||i-n>6e4||P.form(e,"yyyy-MM-dd")!==P.form(new Date(n),"yyyy-MM-dd"))&&(t.lastTime=i,t.isLoading=!t.isLoaded,m.a.getTodayClockInfo({type:"GET",call:function(e){t.data=e.data,t.error="",t.isLoaded=!0,t.updateVal()},error:function(e){t.error="获取打卡信息出错，请重试",t.lastTime=0},always:function(){t.isLoading=!1}}))},updateVal:function(){var t=this.data||{};this.$emit("input",{isLoaded:this.isLoaded,date:new Date,days:t.clockDay,isClockToday:t.isClockToday,doneQuestionCount:t.doneQuestionCount,submitCodeCount:t.submissionCount,learnCourseCount:t.vodCount})}},computed:{month:function(){return P.form(this.value.date,"yyyy-MM")},day:function(){return P.form(this.value.date,"dd")}},watch:{isShow:function(t){t&&this.update()}}},R=Object(I.a)(A,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}]},[t.isLoading?i("Loading",[t._v("打卡信息加载中...")]):t.error?i("Error",[t._v(t._s(t.error))]):i("div",{staticClass:"pop-sign-main clearfix"},[t.lock?i("a",{staticClass:"icon-nc-tips-close",attrs:{href:"javascript:void(0);"},on:{click:function(e){return t.$emit("cancel")}}}):t._e(),t._v(" "),i("div",{staticClass:"pop-sign-time"},[i("div",{staticClass:"pop-sign-day"},[t._v(t._s(t.month))]),t._v(" "),i("div",{staticClass:"pop-sign-week"},[t._v(t._s(t.day))])]),t._v(" "),i("dl",{staticClass:"pop-sign-info"},[i("dt",[t._v("在牛客学习打卡"+t._s(t.value.days)+"天，今天完成了：")]),t._v(" "),i("dd",[i("p",[t._v("刷题")]),t.value.doneQuestionCount?i("p",[t._v(t._s(t.value.doneQuestionCount)+"道")]):i("p",[t._v("--")])]),t._v(" "),i("dd",[i("p",[t._v("提交代码")]),t.value.submitCodeCount?i("p",[t._v(t._s(t.value.submitCodeCount)+"行")]):i("p",[t._v("--")])]),t._v(" "),i("dd",[i("p",[t._v("学习课程")]),t.value.learnCourseCount?i("p",[t._v(t._s(t.value.learnCourseCount)+"课")]):i("p",[t._v("--")])])])])],1)}),[],!1,null,null,null).exports,U=i(0);var M={model:{prop:"images"},props:["images","maxCount","isShow"],components:{},mounted:function(){},methods:{actionDel:function(t){var e=U.without(this.images,t);this.$emit("input",e)}},computed:{leftCount:function(){return(this.maxCount||0)-(this.images||[]).length}}},N=Object(I.a)(M,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}]},[i("ul",{staticClass:"publish-photo-list mb2"},[t._l(t.images,(function(e){return i("li",{key:e.id},[i("a",{staticClass:"icon-nc-tips-close",attrs:{href:"javascript:void(0);"},on:{click:function(i){return t.actionDel(e)}}}),t._v(" "),e.isLoading?[i("img",{staticClass:"image-loading",attrs:{src:"//uploadfiles.nowcoder.com/images/20160415/56_1460702753117_F68B6B6E9DBC3FED9828888665D0AF32"}}),t._v(" "),e.progress?i("div",{staticClass:"image-progress",style:"width:"+e.progress+"%;"}):t._e()]:t._e(),t._v(" "),e.dataUrl||e.src?i("img",{attrs:{src:e.dataUrl||e.src}}):t._e()],2)})),t._v(" "),i("li",{directives:[{name:"show",rawName:"v-show",value:(t.images||[]).length<t.maxCount,expression:"(images || []).length < maxCount"}],ref:"btnImage",staticClass:"publish-photo-add"},[t._v("+")])],2),t._v(" "),i("div",{staticClass:"publish-photo-tips"},[t.leftCount<=0?[t._v("已经上传"+t._s(t.maxCount)+"张")]:[t._v("还可以上传"+t._s(t.leftCount)+"张")]],2)])}),[],!1,null,null,null).exports;var F={props:["isShow","status","link","lock"],components:{Loading:L},methods:{close:function(){this.$emit("cancel")}},computed:{isLoading:function(){return"loading"===this.status},isError:function(){return"error"===this.status}}},q=Object(I.a)(F,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],"class":"error"!==t.status?"publish-link-cont":"feeds-loading-fail warning-tips"},[t.lock?i("a",{staticClass:"icon-nc-tips-close",attrs:{href:"javascript:void(0);"},on:{click:t.close}}):t._e(),t._v(" "),t.isLoading?i("Loading",[t._v("正在获取网址信息...")]):t.isError?[i("i",{staticClass:"icon-exclamation-sign"}),t._v(" 解析失败，请核对网址并\n        "),i("a",{staticClass:"link-green",attrs:{href:"javascript:void(0);"},on:{click:function(e){return e.stopPropagation(),t.$emit("reinput")}}},[t._v("重新输入")])]:t.link?[i("div",{staticClass:"web-link-logo"},[t.link.icon?i("img",{attrs:{src:t.link.icon}}):t._e()]),t._v(" "),i("div",{staticClass:"web-link-info"},[i("div",{staticClass:"web-name",domProps:{innerHTML:t._s(t.link.title||"没有标题")}}),t._v(" "),i("p",{staticStyle:{overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"},domProps:{innerHTML:t._s(t.link.url)}})])]:t._e()],2)}),[],!1,null,null,null).exports,H=i(2),O=i(10);var z={props:["isDisabled"],data:function(){return{link:"",error:"",isShow:!1,isComposing:!1}},methods:{initHide:function(){var t=this,e=H(document);function i(e){t.isShow=!1}e.on("click",i),t.$on("hook:destroyed",(function(){e.unbind("click",i)}))},initComposition:function(){var t=this,e=H(t.$refs.input);function i(){t.isComposing=!0}function n(){t.isComposing=!1}e.on("compositionstart",i),e.on("compositionend",n),t.$on("hook:destroyed",(function(){e.unbind("compositionstart",i),e.unbind("compositionend",n)}))},show:function(t){t=!1!==t&&!this.isDisabled,this.isShow=t,t&&this.focus()},focus:function(){var t=this;t.$nextTick((function(){t.$refs.input.focus()}))},actionAddLink:function(){if(this.isComposing)return;if(!this.url)return void(this.error="请输入正确的网页链接");this.$emit("add-link",this.url),this.link=""}},mounted:function(){var t=this;t.$nextTick((function(){t.initHide(),t.initComposition()}))},computed:{url:function(){return O.fixUrl(this.link)}}},W=Object(I.a)(z,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"publish-tool-item","class":[t.isShow?"hover":"",t.isDisabled?"disabled":""],on:{click:function(e){return e.stopPropagation(),t.show(!t.isShow)}}},[i("i",{staticClass:"icon-nc-link"}),t._v("链接\n    "),i("div",{staticClass:"tooltip bottom tooltip-info",staticStyle:{top:"12px",left:"0"},on:{click:function(t){t.stopPropagation()}}},[t._m(0),t._v(" "),i("div",{staticClass:"tooltip-inner publish-link-box"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.link,expression:"link"}],ref:"input",attrs:{type:"text",placeholder:"输入网页链接"},domProps:{value:t.link},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.actionAddLink(e)},focus:function(e){t.error=""},input:function(e){e.target.composing||(t.link=e.target.value)}}}),t._v(" "),i("div",[i("span",[t._v("一次只推荐一个网页哦")]),t._v(" "),i("span",{staticClass:"fn-error"},[t._v(t._s(t.error))]),t._v(" "),i("a",{staticClass:"link-green float-right",attrs:{href:"javascript:void(0)"},on:{click:t.actionAddLink}},[t._v("添加")])])])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tooltip-arrow"},[e("i")])}],!1,null,null,null).exports,B=i(13),G=i.n(B),V=i(2),J=i(0),Q=i(4),K={};var X={props:["value","lock"],data:function(){return{isShow:!1,current:{},items:[],keyword:""}},mounted:function(){var t=this;t.initCircle(),t.$nextTick((function(){t.initHide()}))},methods:{initHide:function(){var t=this,e=V(document);function i(e){t.isShow=!1}e.on("click",i),t.$on("hook:destroyed",(function(){e.unbind("click",i)}))},initCircle:function(){var t=this;t.value&&t.getList((function(e){var i=J.find(e,(function(e){return e.id===+t.value}));i?t.actionSelect(i):t.$emit("input",-1)}))},show:function(t){if(this.lock)return;t=!1!==t,this.isShow=t,t&&this.focus(),this.getList()},focus:function(){var t=this;t.$nextTick((function(){t.$refs.input.focus()}))},getList:function(t){var e=this,i=V.trim(e.keyword);if((K[i]||[]).length>0)return e.items=K[i],void(J.isFunction(t)&&t(e.items));G.a.getCircleList({query:{query:i},call:function(n){var o=n.data.data;K[i]=o,V.trim(e.keyword)===i&&(e.items=o),J.isFunction(t)&&t(o)}})},join:function(t){var e=this;G.a.applyCircle({type:"POST",body:{circleId:t.id,content:""},call:function(i){t.member=!0,e.$emit("input",t.id)},error:function(t){Q.alert(t.msg)}})},actionSelect:function(t){this.isShow=!1,this.current=t,t?t.member?this.$emit("input",t.id):t.member||this.join(t):this.$emit("input",-1)}}},Y=Object(I.a)(X,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"choose-group-oprt","class":t.isShow?"hover":"",on:{click:function(e){return e.stopPropagation(),t.show(!t.isShow)}}},[-1===t.value?i("span",[t._v("选择圈子")]):i("span",{staticClass:"title",domProps:{innerHTML:t._s(t.current.name)}}),t._v(" "),t.lock?t._e():i("i",{staticClass:"icon-angle-down"}),i("i",{staticClass:"icon-angle-up"}),t._v(" "),i("div",{staticClass:"tooltip bottom tooltip-info",staticStyle:{top:"12px",left:"0"},on:{click:function(t){t.stopPropagation()}}},[t._m(0),t._v(" "),i("div",{staticClass:"tooltip-inner"},[i("div",{staticClass:"search-input-wrap right focus"},[i("label",{staticClass:"icon-search"}),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],ref:"input",attrs:{type:"text",placeholder:"输入圈子关键字搜索"},domProps:{value:t.keyword},on:{input:[function(e){e.target.composing||(t.keyword=e.target.value)},t.getList]}})]),t._v(" "),i("ul",{staticClass:"choose-group-tips"},[i("li",{"class":-1===t.value?"selected":"",on:{click:function(e){return t.actionSelect()}}},[t._m(1),t._v(" "),t._m(2),t._v(" "),i("i",{staticClass:"icon-ok-sign"})]),t._v(" "),t._l(t.items,(function(e){return i("li",{key:e.id,"class":e.id===t.value?"selected":"",on:{click:function(i){return t.actionSelect(e)}}},[i("a",{staticClass:"choose-group-pic",attrs:{href:"javascript:void(0)"}},[e.logo?i("img",{attrs:{src:e.logo+"?x-oss-process=image/resize,m_mfit,w_150,h_150",alt:e.name}}):t._e()]),t._v(" "),i("div",{staticClass:"choose-group-info"},[i("div",{staticClass:"title",domProps:{innerHTML:t._s(e.name)}},[i("span",{domProps:{innerHTML:t._s(e.name)}}),t._v(" "),e.member?t._e():i("button",{staticClass:"btn btn-primary btn-xs",attrs:{type:"button"}},[t._v("推荐")])]),t._v(" "),i("p",[t._v(t._s(e.memberCount)+" 位圈友")])]),t._v(" "),i("i",{staticClass:"icon-ok-sign"})])}))],2)])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tooltip-arrow"},[e("i")])},function(){var t=this.$createElement,e=this._self._c||t;return e("a",{staticClass:"choose-group-pic",attrs:{href:"javascript:void(0)"}},[e("img",{attrs:{src:"//static.nowcoder.com//fe/style/images/common/res/empty/head.png",alt:"empty"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"choose-group-info",staticStyle:{"margin-top":"0"}},[e("div",{staticClass:"title"},[this._v("不发到任何圈子")])])}],!1,null,null,null).exports,Z=i(2),tt=i(0),et=i(19),it=i(48),nt=i(4),ot=i(17),at=i(25),st=i(39);function rt(){var t=this.from,e=window.pageInfo||{};return{FEED_CACHE_KEY:"FEED_CACHE_KEY_"+(t||"DEFAULT").toUpperCase()+"_"+ot.getUid()+(this.hash?"_"+this.hash:""),isFocus:!1,isLogin:ot.isLogin(),content:"",contentMaxLength:1e3,contentWarnLength:900,atRecord:[],subjectRecord:[],type:0,lockCircle:"link"!==t&&"circleId"in e,circle:"link"!==t&&e.circleId||-1,imageMaxCount:9,images:[],clock:{isLoaded:!1,isClockToday:!1,date:new Date,doneQuestionCount:0,submitCodeCount:0,learnCourseCount:0,days:0},linkStatus:"loading",link:{icon:"",title:"",url:""},syncFeed:!1,publishing:!1}}var ct={name:"Publisher",components:{Editor:E,Clock:R,Photo:N,LinkItem:q,BtnLink:W,BtnCircle:Y},props:["from","initialContent","hash"],data:rt,provide:function(){return{upload:this.upload}},mounted:function(){var t=this,e=et.getParam("source");t.$nextTick((function(){t.input=t.$refs.input,t.initEmoji(),t.initUpload(),t.initCache(),"clock"!==t.from&&"reply"!==t.from&&t.initClock(),"clock"===t.from&&t.$nextTick((function(){t.actionClock()})),"link"===t.from&&t.$nextTick((function(){t.linkStatus="success",t.link=t.initialContent,t.actionType(3)})),"subject"===t.from&&t.$nextTick((function(){t.content="#"+t.initialContent+"# "})),"history"===e&&t.$nextTick((function(){t.actionFocus(),t.input.focus()}))}))},methods:{initCache:function(){var t=this;t.$nextTick((function(){var e,i,n;e=it.get(t.FEED_CACHE_KEY)||{},i=e.extData||{},n=+e.type||0,t.content=e.content||"",t.atRecord=e.atRecord||[],t.subjectRecord=e.subjectRecord||[],2===n?t.images=tt.filter(i.imgs,(function(t){return!!t})):3===n&&i&&(t.link=i,t.linkStatus="success"),t.type=2===n&&t.images.length>0?2:3===n&&t.link?3:0,function(){function e(){it.set(t.FEED_CACHE_KEY,{type:t.type,content:t.content,extData:t.extData,atRecord:t.atRecord,subjectRecord:t.subjectRecord})}t.$watch("content",e),t.$watch("extData",e)}()}))},initEmoji:function(){var t=this,e=t.$refs.input,i=st.show({target:t.$refs.btnEmoji,call:function(n){t.isFocus=!0,e.focus(),t.$nextTick((function(){i.attach.fixPosition(),st.renderInIpt(e.$refs.input,n)}))}});t.$ncPushChild&&t.$ncPushChild(i)},initUpload:function(){var t=this,e=[t.$refs.btnImage,t.$refs.photo.$refs.btnImage];tt.forEach(e,(function(e){c.initUpload({target:e,context:t.upload})}))},initClock:function(){var t=this;t.isLogin&&m.a.getTodayClockInfo({type:"GET",call:function(e){var i=e.data,n=(i=i===undefined?{}:i).isClockToday;t.clock.isClockToday=n}})},clear:function(){var t=this,e=rt.call(t);tt.forEach(e,(function(e,i){t[i]=e})),it.remove(t.FEED_CACHE_KEY),t.content=""},check:function(){var t=this.type,e=this.extData,i=Z.trim(this.input.val()),n="";if(i||e||0!==t){if(this.contentLength>this.contentMaxLength)n="内容最大长度为"+this.contentMaxLength;else if(2===t&&e){tt.findIndex(e.imgs,(function(t){return!t}))>=0&&(n="请等待图片上传完成")}else if(3===t&&e){var o=this.linkStatus;n="error"===o?"获取网址信息出错":"loading"===o?"请等待网址加载完成":""}}else n="内容不能为空";return n&&nt.alert(n),!n},isType:function(t){return this.type===t},actionFocus:function(){this.isFocus=!0,"reply"!==this.from||this.isLogin||at.showLogin()},actionBlur:function(){this.isFocus=!1,this.input.blur()},actionType:function(t){this.type=t},actionClock:function(){this.isClockEnable&&this.actionType(1)},actionSubject:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"",e=this;e.$emit("input-subject",t),e.input.focus(),e.$nextTick((function(){var i=e.input.$el.selectionStart||0,n=tt.isNumber(e.input.$el.selectionEnd)?e.input.$el.selectionEnd:e.input.content.length;e.input.content=e.input.content.substring(0,i)+" #"+(t?t+"# ":"")+e.input.content.substring(n),e.$nextTick((function(){e.input.$el.selectionStart=i+(t?t.length+2:0)+2,e.input.$el.selectionEnd=i+(t?t.length+2:0)+2}))}))},actionMaxCount:function(){this.isImageMax&&nt.alert("最多只能上传"+this.imageMaxCount+"张图片")},actionLink:function(t){var e=this.$refs.btnLink;t&&(this.actionType(0),e.show(!1));0===this.type&&e.show()},actionAddLink:function(t){var e=this;e.actionType(3),e.$refs.btnLink.show(!1),e.linkStatus="loading",c.getLinkDetail({link:t,call:function(t){e.linkStatus=t?"success":"error",t&&(e.link=t)}})},actionSubmit:function(){if(!this.check())return;this.$emit("publish",{content:this.input.val().replace(/\s*$/,""),type:this.type,toFeed:this.syncFeed,extData:this.extData,atRecord:this.atRecord,subjectRecord:this.subjectRecord})},actionPublish:function(){var t=this,e=t.type;if(!t.check())return;if(t.publishing=!0,1===e)return m.a.newClockRecord({body:{feeling:t.input.val().replace(/\s*$/,""),circle:t.circle},call:function(e){var i=e.data;t.$emit("published",i),t.clear(),t.clock.isClockToday=!0,"link"===t.from&&nt.tips("分享成功")},error:function(e){var i=e.msg;nt.alert(i,(function(){"clock"===t.from&&(window.location.href="/profile/"+ot.getUid()+"/clockInfo")}))},always:function(){t.publishing=!1}});var i=t.extData;g.a.createMoment({body:{content:t.input.val().replace(/\s*$/,""),type:e,ext:i?JSON.stringify(i):undefined,circle:t.circle},call:function(e){var i=e.data;t.$emit("published",i),t.clear(),"link"===t.from&&nt.tips("分享成功")},error:function(t){var e=t.msg;nt.alert(e)},always:function(){t.publishing=!1}})}},watch:{images:function(){var t=(this.images||[]).length;this.actionType(0===t?0:2)}},computed:{upload:function(){var t=this;return new f({max:t.imageMaxCount,getList:function(){return t.images},update:function(e){t.images=e,t.actionType(2)}})},extData:function(){var t,e=this.type;if(2===e){var i=tt.map(this.images,(function(t){return t.isLoading?null:{src:t.src,width:t.width,height:t.height,alt:t.alt}}));i.length>0&&(t={imgs:i})}else 3===e&&(t=this.link);return t},isEmpty:function(){return 0===this.type&&!this.content},isImageEnable:function(){return!this.type||this.isType(2)},isClockEnable:function(){return this.isType(0)&&!1===this.clock.isClockToday},isLinkEnable:function(){return this.isType(0)},isImageMax:function(){return(this.images||[]).length>=this.imageMaxCount},contentLength:function(){return Z.trim(this.content).length},disabledReason1:function(){return this.clock.isClockToday?"今日已经打过卡了哦":this.isType(1)?"当前正在打卡哦":this.isType(2)?"暂不支持带图打卡哦":this.isType(3)?"暂不支持同时打卡和分享链接哦":""},disabledReason2:function(){return this.isType(2)&&this.isImageMax?"最多可以上传"+this.imageMaxCount+"张图片哦":this.isType(1)?"暂不支持带图打卡哦":this.isType(3)?"暂不支持带图分享链接哦":""},disabledReason3:function(){return this.isType(1)?"暂不支持同时打卡和分享链接哦，你可以直接在正文中输入要分享的网址哦":this.isType(2)?"暂不支持带图分享链接，你可以直接在正文中输入要分享的网址哦":this.isType(3)?"当前正在分享链接哦":""}}},lt=Object(I.a)(ct,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"feed-publish-area","class":t.isFocus||t.type?"focus":"",on:{click:t.actionFocus}},[i("editor",{ref:"input",attrs:{readonly:!1,placeholder:"reply"===t.from?"在这里添加你的回帖吧！":"此刻你想和大家分享什么...",upload:t.upload,subjectRecord:t.subjectRecord,atRecord:t.atRecord},on:{send:function(e){"reply"===t.from?t.actionSubmit():t.actionPublish()},"update:subjectRecord":function(e){t.subjectRecord=e},"update:subject-record":function(e){t.subjectRecord=e},"update:atRecord":function(e){t.atRecord=e},"update:at-record":function(e){t.atRecord=e}},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.type||t.contentLength>t.contentWarnLength,expression:"type || contentLength > contentWarnLength"}],staticClass:"focus-content"},[i("clock",{attrs:{isShow:t.isType(1),lock:"clock"!==t.from},on:{cancel:function(e){return t.actionType(0)}},model:{value:t.clock,callback:function(e){t.clock=e},expression:"clock"}}),t._v(" "),i("photo",{ref:"photo",attrs:{isShow:t.isType(2),maxCount:t.imageMaxCount},on:{cancel:function(e){return t.actionType(0)}},model:{value:t.images,callback:function(e){t.images=e},expression:"images"}}),t._v(" "),i("link-item",{attrs:{isShow:t.isType(3),lock:"link"!==t.from,link:t.link,status:t.linkStatus},on:{cancel:function(e){return t.actionType(0)},reinput:function(e){return t.actionLink(!0)}}}),t._v(" "),t.contentLength>t.contentWarnLength?[t.contentLength<=t.contentMaxLength?i("div",{staticClass:"textarea-txt-tip"},[t._v("还剩"),i("span",{staticClass:"font-green"},[t._v(t._s(t.contentMaxLength-t.contentLength))]),t._v("字")]):i("div",{staticClass:"textarea-txt-tip"},[t._v("已超出"),i("span",{staticClass:"font-red"},[t._v(t._s(t.contentLength-t.contentMaxLength))]),t._v("字")])]:t._e()],2),t._v(" "),i("div",{staticClass:"publish-tool-bar"},["clock"!==t.from&&"link"!==t.from?[i("div",{directives:[{name:"show",rawName:"v-show",value:t.isImageMax||!t.isImageEnable,expression:"isImageMax || !isImageEnable"}],staticClass:"publish-tool-item disabled js-nc-title-tips",attrs:{"data-title":t.disabledReason2},on:{click:t.actionMaxCount}},[i("i",{staticClass:"icon-picture"}),t._v("图片")]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.isImageMax&&t.isImageEnable,expression:"!isImageMax && isImageEnable"}],ref:"btnImage",staticClass:"publish-tool-item"},[i("i",{staticClass:"icon-picture"}),t._v("图片")]),t._v(" "),"reply"!==t.from?i("div",{staticClass:"publish-tool-item js-nc-title-tips","class":t.isClockEnable?"":"disabled",attrs:{"data-title":t.disabledReason1},on:{click:t.actionClock}},[i("i",{staticClass:"icon-nc-sign2"}),t._v("打卡")]):t._e(),t._v(" "),i("div",{staticClass:"publish-tool-item feed-topic-entry",on:{click:function(e){return t.actionSubject("")}}},[i("i",{staticClass:"icon-nc-topic"}),t._v("话题")]),t._v(" "),"reply"!==t.from?i("btn-link",{ref:"btnLink",staticClass:"js-nc-title-tips",attrs:{"data-title":t.disabledReason3,isDisabled:!t.isLinkEnable},on:{"add-link":t.actionAddLink}}):t._e()]:t._e(),t._v(" "),i("div",{ref:"btnEmoji",staticClass:"publish-tool-item"},[i("i",{staticClass:"icon-nc-face4"}),t._v("表情")]),t._v(" "),"reply"===t.from?i("label",{staticClass:"checkbox","class":t.syncFeed?"checked":""},[i("span",{staticClass:"icons"}),i("input",{directives:[{name:"model",rawName:"v-model",value:t.syncFeed,expression:"syncFeed"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.syncFeed)?t._i(t.syncFeed,null)>-1:t.syncFeed},on:{change:function(e){var i=t.syncFeed,n=e.target,o=!!n.checked;if(Array.isArray(i)){var a=t._i(i,null);n.checked?a<0&&(t.syncFeed=i.concat([null])):a>-1&&(t.syncFeed=i.slice(0,a).concat(i.slice(a+1)))}else t.syncFeed=o}}}),t._v("同时转发到我的动态")]):t._e()],2),t._v(" "),i("div",{staticClass:"feed-publish-oprt"},["reply"!==t.from?i("btn-circle",{attrs:{lock:t.lockCircle},model:{value:t.circle,callback:function(e){t.circle=e},expression:"circle"}}):t._e(),t._v(" "),i("button",{staticClass:"btn btn-sm","class":t.isEmpty||t.publishing?"btn-default":"btn-primary",attrs:{type:"button",disabled:t.isEmpty||t.publishing},on:{click:t.actionSubmit}},[t._t("default",[i("span",{on:{click:t.actionPublish}},[t._v("发布")])])],2)],1)],1)}),[],!1,null,null,null);e.a=lt.exports},26:function(t,e){t.exports=vendor_library},31:function(t,e,i){var n=i(7);t.exports={url:{getHotTagJson:"/discuss/tag/hot/json",getAllTagJson:"/discuss/tag/all/json",createPost:"/discuss/create",editPost:"/discuss/edit",deletePost:"/discuss/delete",saveDiscussDraft:"/discuss/draft/save",getDiscussDraft:"/discuss/draft/get",top:"/discuss/top",untop:"/discuss/untop",gild:"/discuss/gild",ungild:"/discuss/ungild",updateCertify:"/discuss/certify",sink:"/discuss/sink",unsink:"/discuss/unSink",hidden:"/discuss/hidden",unhidden:"/discuss/unhidden",unWarningPost:"/discuss/unWarningPost",hot:"/discuss/hot",unhot:"/discuss/unhot",getSimilarList:"/search/similar-post",getUserRecommend:"/discuss/users/recommend",invitedUser:"/discuss/users/invited",spam:"/admin/mark-post-spam",unspam:"/admin/spam-post-wash-white",allspam:"/admin/delete-all-ugc",getAllTag:"/discuss/tag/exp",predictPostAttr:"/discuss/predict",getSummary:"/discuss/get-info",getTagNumInfo:"/discuss/tag/numinfo",disableCmt:"/discuss/comment-disable",openSubjectGuide:"/discuss/subject-guide/open",closeSubjectGuide:"/discuss/subject-guide/close"}},n.add(t.exports,t.exports.url)},32:function(t,e,i){var n=i(2),o=i(0),a=i(22),s=i(8),r=i(11),c=i(4),l=i(24),d=i(14);t.exports={wx:function(t,e){if(t)return new c({title:"分享到微信",noUnique:e,width:320,content:['<div class="avarta-box">','<img height="200px" style="display:block;margin:0 auto;" src="',t,'" />','<div style="text-align:center;font-size:14px;margin-top:20px;">微信扫一扫，点击手机屏幕右上角分享</div>',"<div>"].join("")})},ac:function(t){var e=this,i=t.nextUrl||"",n=(t.share,window.location.origin+"/questionTerminal/"+t.uuid),o=new c({title:"恭喜通过本题",width:700,content:['<div class="clearfix">','<div class="pop-course">','<div class="pop-c-main"><img src="//static.nowcoder.com/images/res/course/add-jy.png" >','<span class="pop-c-tip">恭喜你通过本题</span>','<div class="pop-c-result">',"<p>运行时间：",t.seconds,"ms</p>","<p>占用内存：",t.memory,"k</p>"," </div>",'<div class="layer-share-wrapper" style="position:initial;border:0px;box-shadow:initial;">','<span style="line-height:42px;font-size:14px;">邀请朋友来挑战：</span>','<div class="layer-share-item js-share-wx"><i class="icon-nc-wechat"></i><p>微信</p></div>','<div class="layer-share-item js-share-link" data-share="fqq"><i class="icon-nc-qq"></i><p>QQ</p></div>','<div class="layer-share-item js-copy-link"><i class="icon-nc-link"></i><p>复制链接</p></div>'," </dl>","</div>",""!==i?'<a href="'+i+'" class="btn btn-primary js-go-next">进入下一题</a>':"","</div>",'<a href="',t.answerUrl,'" class="btn btn-primary" target="_blank">分享解题思路</a>',"</div>"].join(""),listeners:{"click .js-share-wx":{handler:function(){e.wx(r.rqUrl("https://m.nowcoder.com/questionTerminal?uuid="+t.uuid))}}}});return a.bind({el:o.getEl('.js-share-link[data-share="fqq"]'),desc:"这道题我终于AC了，有要一起刷的吗？",link:n}),s.copy({el:o.getEl(".js-copy-link"),content:n,call:function(){c.tips("复制成功!")},error:function(){c.alert("复制失败!")}}),o},ipt:function(t,e,i,n,o){return new c({title:t||"提示",width:530,content:['<div class="pop-recovery-content">',e?'<p class="pop-tip">'+e+"</p>":"",'<div class="control-group js-ipt" style="width:100%;"><textarea class="pop-recovery-txt"',i?" placeHolder="+i:"",' style="width:97%;padding:0.5% 1%;height:120px;margin:10px auto;resize:none;"></textarea></div>',"</div>"].join(""),render:function(){var t=this.ipt=l.transform(this.getEl("div.js-ipt"));o&&t.listen("change",(function(){o(t,t.val())}))},ok:function(){var t=this.ipt,e=t.val();return!(!o||o(t,e))||(o||e)&&n&&n.call(this,e,t)},close:function(){}})},selectJob:function(t,e){var i=d.jobs,a=o.toMap(t,(function(t){return{key:t,value:!0}})),s="";o.forEach(i,(function(t,e){s+='<a class="tag-label '+(a[t]?"selected":"")+'" href="javascript:void(0);" data-name="'+e+'">'+e+"</a> "})),new c({title:"职业方向",content:s,noUnique:!0,render:function(){this.getEl().on("click","a.tag-label",(function(t){var e=n(t.currentTarget);e[e.hasClass("selected")?"removeClass":"addClass"]("selected")}))},ok:function(){var t=this.getEl(),a=[],s=[];if(o.forEach(t.find("a.selected"),(function(t){var e=n.trim(n(t).attr("data-name")),o=i[e];o&&a.push(o),o&&s.push(e)})),0===s.length)return c.error("请选择职业方向"),!0;e&&e(a,s)},cancel:function(){}})}}},33:function(t,e,i){"use strict";var n=i(16),o=i.n(n),a=i(29),s=i(0),r=i(2),c=i(4),l=i(39),d=i(44),u=i(51);var p={ncPopup:function(t){var e=new(a.extend(this))(t);return c.wrap(e,{width:750,hasNoFooter:!0,hasNoTitle:!0}),e},props:["data"],mounted:function(){var t=this;t.$nextTick((function(){var e=r(t.$refs.input);e.focus(),t.initEmoji(),d.input(e),u.input(e)}))},data:function(){return{comment:"",publishing:!1,replyRoot:!1,commentWarnLength:990,commentMaxLength:1e3}},computed:{commentLength:function(){return r.trim(this.comment).length},rootType:function(){var t=this.data.root||{},e=t.sourceType;return 8===e?1:2===e?3:t.momentType+5},title:function(){var t=this.data,e=this.data.type,i=s.json(t.ext)||{};return 1===e||9===e||11===e?i.title:3===e?t.ownerView.user.nickname+"的回帖：":4===e?1===this.rootType||3===this.rootType||9===this.rootType?s.json(t.root.ext,{}).title:t.root.ownerView.user.nickname+"说：":t.ownerView.user.nickname+"说："},content:function(){var t=this.data,e=this.data.type,i=0,n="",o=1===e||9===e||11===e?this.filterHTML(s.json(t.ext,{}).content||""):3===e?this.filterHTML(s.json(t.ext,{}).commentContent||""):4===e?this.filterHTML(1===this.rootType||9===this.rootType||11===this.rootType?s.json(t.root.ext,{}).content||"":3===this.rootType?s.json(t.root.ext,{}).commentContent||"":s.json(t.root.ext,{}).content||""):this.filterHTML(this.data.content);return s.forEach(o,(function(t){if(!(i+t.length<200))return n=n+t.slice(0,200-i)+"...",s.BREAK;n=n+"<p>"+t+"</p>",i+=t.length})),n},suffix:function(){var t,e=this.data.type;if(4===e)return t=this.data.root||{},this._getSuffix(s.json(t.ext,{}).ext,this.rootType);return this._getSuffix(this.data.ext,e)},transmitText:function(){var t=this.filterHTML(this.data.content).join("");return t.length>200?t.slice(0,200)+"…":t}},watch:{comment:function(t){t||(this.replyRoot=!1)}},methods:{initEmoji:function(){var t=this,e=t.$refs.input,i=l.show({target:t.$refs.btnEmoji,call:function(n){t.isFocus=!0,e.focus(),t.$nextTick((function(){i.attach.fixPosition(),l.renderInIpt(e,n)}))}});t.$ncPushChild(i)},check:function(){if(this.comment.length>this.commentMaxLength)return c.alert("字数超出限制啦"),!1;return!0},clear:function(){this.comment=""},actionSubject:function(){var t=this,e=t.$refs.input;e.focus(),t.$nextTick((function(){var i=e.selectionStart||0,n=e.selectionEnd||t.comment.length;t.comment=t.comment.substring(0,i)+" # "+t.comment.substring(n),t.$nextTick((function(){e.selectionStart=i+2,e.selectionEnd=i+2}))}))},actionForward:function(){var t=this,e=t.data,i=e.type>=5&&e.type<=8||12===e.type?JSON.stringify({ext:e.ext,content:t.data.content}):e.ext,n=1===e.ownerView.ownerType?s.json(e.ext).author:e.ownerView.user.userId;t.check()&&(t.publishing=!0,o.a.createShare({body:{content:t.comment,ext:i,entityId:e.sourceId,entityType:e.sourceType,entityOwner:n,uuid:e.uuid,addComment:t.replyRoot},call:function(){t.$emit("forward"),c.tips("转发成功"),t.clear(),t.popup.close()},error:function(t){c.alert(t.msg)},always:function(){t.publishing=!1}}))},filterHTML:function(t){var e=(t=(t=t.replace(/<img\s+[^>]*?data\-card\-emoji=['"](.*?)['"]\s+[^>]*?src=['"]([^'"]+)[^>]*>/gi,"$1")).replace(/<img [^>]*src=['"]([^'"]+)[^>]*>/gi,"[图片]")).split(/<br[^>]*?>/gi);return s.map(e,(function(t){return r.trim(t).replace(/<[^>].*?>/gi,"")}))},_getSuffix:function(t,e){return{6:"[打卡]",7:new Array((s.json(t,{}).imgs||[]).length+1).join("[图片]"),8:"[链接]"}[e]||""}}},f=i(1),h=Object(f.a)(p,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"pop-content clearfix"},[i("a",{staticClass:"pop-close js-popup-close",staticStyle:{position:"relative","z-index":"99"},attrs:{href:"javascript:void(0)"}}),t._v(" "),i("div",{staticClass:"pop-feed-cont"},[i("div",{staticClass:"clearfix"},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.comment,expression:"comment"}],ref:"input",attrs:{placeholder:"此刻你的想法和感受"},domProps:{value:t.comment},on:{input:function(e){e.target.composing||(t.comment=e.target.value)}}}),t._v(" "),t.commentLength>t.commentWarnLength?i("div",{staticClass:"textarea-txt-tip"},[t.commentLength<=t.commentMaxLength?i("div",{staticClass:"textarea-txt-tip"},[t._v("还剩"),i("span",{staticClass:"font-green"},[t._v(t._s(t.commentMaxLength-t.commentLength))]),t._v("字")]):i("div",{staticClass:"textarea-txt-tip"},[t._v("已超出 "),i("span",{staticClass:"font-red"},[t._v(t._s(t.commentLength-t.commentMaxLength))]),t._v(" 字")])]):t._e()]),t._v(" "),i("div",[4===t.data.type?i("div",{staticClass:"feed-transmit"},[i("i",{staticClass:"icon-nc-share2 mr1"}),t._v(" "),i("a",{staticClass:"name",staticStyle:{color:"#333"},attrs:{href:"javascript:void(0)"},domProps:{innerHTML:t._s(t.data.ownerView.user.nickname)}}),t._v(" "),i("span",{staticClass:"font-gray",staticStyle:{display:"inline-block","vertical-align":"middle"},domProps:{innerHTML:t._s(t.transmitText)}})]):t._e(),t._v(" "),i("div",{staticClass:"feed-cont-quote"},[t.title?i("div",{staticClass:"feed-title",domProps:{innerHTML:t._s(t.title)}}):t._e(),t._v(" "),i("div",{staticClass:"feed-cont"},[i("p",{domProps:{innerHTML:t._s(t.content)}}),t._v(" "),t.suffix?i("p",[t._v(t._s(t.suffix))]):t._e()])])]),t._v(" "),i("div",{staticClass:"pop-publish-oprt"},[i("div",{staticClass:"publish-tool-bar"},[i("div",{ref:"btnEmoji",staticClass:"publish-tool-item"},[i("i",{staticClass:"icon-nc-face4"}),t._v("表情")]),t._v(" "),i("div",{staticClass:"publish-tool-item",on:{click:t.actionSubject}},[i("i",{staticClass:"icon-nc-topic"}),t._v("话题")]),t._v(" "),t.data.type>=5?i("div",{staticClass:"publish-tool-item"},[i("label",{staticClass:"checkbox","class":[t.replyRoot&&t.comment?"checked":"",t.comment?"":"disabled"],on:{click:function(e){e.preventDefault(),t.replyRoot=!t.replyRoot}}},[i("span",{staticClass:"icons"}),i("input",{attrs:{type:"checkbox"}}),t._v("同时回复给原作者\n                    ")])]):t._e()]),t._v(" "),i("div",{staticClass:"feed-publish-oprt"},[i("button",{staticClass:"btn btn-primary btn-sm",attrs:{disabled:t.publishing,type:"button"},on:{click:t.actionForward}},[t._v("发布")])])])])])}),[],!1,null,null,null);e.a=h.exports},34:function(t,e,i){var n=i(7);t.exports={url:{newHrAccount:"/job/new-account",internCenter:"/job/center",delJob:"/job/del",getJobs:"/job/list",hideJob:"/job/hide",revertHideJob:"/job/revert-hide",downJob:"/job/down",revertDownJob:"/job/revert-down",forbidHr:"/job/forbid"}},n.add(t.exports,t.exports.url)},35:function(t,e,i){"use strict";var n=i(5),o=i.n(n),a=i(15),s=i.n(a),r=i(9),c=i.n(r),l=i(2),d=i(6),u=i(3),p=i(0),f=i(4),h=i(10),m=i(11),v=i(22),g=i(32),y=u.create(),w=y;u.mix(y,d,{_template:['<div class="pop-sign-cont">','<div class="pop-sign-success">','<div class="sign-success-tip">','<p class="fui-check-inverted"></p>',"<p>今日已打卡成功</p>","</div>",'<div class="pop-sign-tip">你已打卡#{studyDay}天，再接再励吧！ <a href="/feed/main/detail/#{feedUuid}" target="_blank" class="link-green">本次打卡页面 »</a></div>','<dl class="pop-clock-share">',"<dt>同步到：</dt>",'<dd><a href="javascript:void(0);" class="js-share share-wb" data-share="weibo"></a></dd>','<dd><a href="javascript:void(0);" class="js-share share-tx" data-share="qzone"></a></dd>','<dd><a href="javascript:void(0);" class="share-wx"></a></dd>',"</dl>","</div>",'<div class="pop-member-wrap">',"#{memberList}",'<a href="javascript:void(0);" class="btn btn-primary confirm-btn">确定</a>',"</div>","</div>"].join(""),listeners:[{name:"render",type:"custom",handler:function(){this.initShare(),this.initGetImage()}},{name:"click a.share-wx",handler:function(t){g.wx(m.rqUrl(this.getShareUrl()),!0)}},{name:"click .icon-nc-zan2",handler:function(t){var e=l(t.currentTarget).parent().parent(),i=e.hasClass("selected");t.preventDefault(),o.a[i?"unlike":"like"]({body:{id:e.data("id"),type:e.data("type")},call:function(){e.toggleClass("selected")},error:function(t){var e=t.msg;f.alert(e)}})}}],show:function(t){var e=new y(t=t||{});return f.wrap(e,{title:"每日学习打卡",content:e.html(),width:630,hasNoFooter:!0,ok:t.ok,close:t.close}),e}},{initShare:function(){var t=this.getEl(),e=this.rawConfig.data||{},i=h.execTpl("我在「牛客」学习打卡第#{studyDay}天，刷题#{doneQuestionCount}道，提交代码#{submissionCount}行#{desc}",{studyDay:e.studyDay,doneQuestionCount:e.doneQuestionCount,submissionCount:e.submissionCount,desc:e.feeling?"，"+e.feeling.slice(0,200):""});this.shareConf={el:t.find("a.js-share"),title:"",desc:i,image:this.shareImage,link:this.getShareUrl()},v.bind(this.shareConf)},initGetImage:function(){var t=this,e=t.rawConfig,i=(new Date).getTime(),n=null;t.listen("destroy",(function(){window.clearTimeout(n)})),function o(){(new Date).getTime()-i>3e5||c.a.getShareImage({query:{id:e.data.id},call:function(e){var i=e.data;l.trim(i)&&(t.shareImage=i,t.shareConf&&(t.shareConf.image=i))},always:function(){l.trim(t.shareImage)||(n=window.setTimeout(o,1e3))}})}()},_getData:function(t){var e=this.rawConfig.data||{},i="";e.clockUsers&&e.clockUsers.length>0&&p.forEach(e.clockUsers,(function(t){var e=t.sourceId,n=t.sourceType,o=t.feedUuid,a=t.name,s=t.headUrl,r=t.isLiked;i+='<div class="pop-member-item '+(r?"selected":"")+'" data-id="'+e+'" data-type="'+n+'"><div class="head-pic"><img src="'+s+'" title="'+a+'" width="50" height="50"><i class="icon-nc-zan2"></i></div><a href="/feed/main/detail/'+o+'" target="_blank" class="pop-member-go link-green">去看看</a></div>'}));return{id:e.id,feedUuid:e.feedUuid,memberList:e.clockUsers.length?'<div class="pop-sign-tip">他们也在打卡，去给战友们加加油吧！</div><div class="pop-member">'+i+"</div>":"",profile:this.getProfileUrl(),studyDay:e.studyDay}},getProfileUrl:function(){return"/profile/"+window.globalInfo.ownerId+"/clockInfo"},getShareUrl:function(){var t=this.rawConfig.data||{};return t.feedUuid?window.location.origin+"/feed/main/detail/"+t.feedUuid:"http://m.nowcoder.com/profile/clockInfo?id="+t.id}});var b=i(23),C=i(6),k=i(3),x=i(0),_=i(4),j=k.create(),T=j;k.mix(j,C,{_template:["<div>",'<div class="pop-verify-pic">','<img src="//uploadfiles.nowcoder.com/images/20190313/56_1552478118146_D4243B2D6CA86E479E25A1746E1AC940" style="width:295px;height:141px;">',"</div>","#{content}",'<div class="pop-verify-box">','<a href="//www.nowcoder.com/user/authentication" class="btn btn-primary">申请认证</a>',"</div>","</div>"].join(""),listeners:[{name:"render",type:"custom",handler:function(){}}],show:function(t){var e=new j(t=t||{});_.wrap(e,{title:"身份认证",content:e.html(),width:600,hasNoFooter:!0})}},{_getData:function(t){var e=t.type,i=['<div class="pop-verify-txt"><p>为保障职位信息真实，该功能仅牛客认证用户（正式员工/实习员工）或企业用户可使用，快去进行职业身份认证吧！</p></div>','<div class="pop-verify-txt"><p>认证通过后，你可以：</p></div>','<div class="pop-verify-txt">',"<p>1、获得牛币奖赏，精美礼物直接兑换</p>","<p>2、专属认证标示，获得官方背书</p>","<p>3、拥有专属招聘特权</p>","</div>"].join("");return{content:"1"===x.id(e)?'<div class="pop-verify-txt"><p>发布职位功能只针对正式员工和实习员工开放，您当前的认证身份是准员工，如果你已入职，请重新申请正式员工认证。</p></div>':i}}});var I=i(34),E=i.n(I),S=i(6),L=i(3),$=i(4),D=i(41),P=L.create(),A=P;L.mix(P,S,{_template:["<div>",'<div class="pop-agreement">',"<h2>实习职位发布使用说明与协议</h2>",'<div class="pop-agreement-cont">',"<p>1. 欢迎在牛客网发布贵司招聘职位，给学弟学妹提供更直接靠谱的工作机会；</p>","<p>2. 你可直接在牛客网招聘后台进行职位管理、简历处理，还可限时免费使用牛客网的视频面试工具，发送面试邮件通知，方便快速的进行面试筛选；</p>","<p>3. 你发布的职位将直接出现在牛客的求职区中，并有机会获得牛客网公众号的免费推荐；</p>","<p>4.以上服务都是免费的。我们只希望你能体恤学弟学妹们简历石沉大海的心塞，及时处理简历，标记简历是否通过，我们会给应聘者及时反馈；</p>","<p>5.如果你简历处理及时，我们将免费增加你发布职位的曝光率，并给你进行优质牛油简历的精准推荐。</p>",'<p>使用协议请查看<a href="https://www.nowcoder.com/discuss/131474" class="link-green" target="_blank">《发布实习职位功能使用协议》</a></p>',"</div>",'<div class="js-agree-box"></div>',"</div>",'<div class="pop-btn-wrapper">','<a href="javascript:void(0);" class="btn btn-default js-submit">确定</a>',"</div>","</div>"].join(""),listeners:[{name:"render",type:"custom",handler:function(){this.initCpns()}},{name:"click .js-submit",handler:function(t){var e=this;if(e.argeeCpn.isChecked()){var i=window.open();E.a.newHrAccount({body:{},call:function(t){e.fire("ok",i)},error:function(t){if(2===t.code)return $.show({noUnique:!0,type:"confirm",content:"你的认证邮箱已经注册过企业账号，是否将该认证邮箱注册的企业账号关联到你的牛客账号，关联后你可以发布实习职位。",okTxt:"确定关联",cancelTxt:"暂不关联",ok:function(){E.a.newHrAccount({body:{confirm:!0},call:function(t){e.fire("ok",i)},error:function(t){$.alert(t.msg),i.close()}})},cancel:function(){e.popup.close()}});$.alert(t.msg),i.close()}})}}}],show:function(t){var e=new P(t=t||{});$.wrap(e,{title:"实习职位发布使用说明与协议",content:e.html(),width:600,hasNoFooter:!0})}},{initCpns:function(){var t=this;t.argeeCpn=new D({renderTo:t.getEl(".js-agree-box"),text:'我已阅读并同意<a href="javascript:void(0);" class="link-green">《发布实习职位功能使用协议》</a>',change:function(){t.fixBtn()}})},fixBtn:function(){var t=this.argeeCpn.isChecked();this.getEl(".js-submit").removeClass(t?"btn-default":"btn-primary").addClass(t?"btn-primary":"btn-default")}});var R,U,M=i(42),N=i(2),F=i(6),q=i(3),H=i(0),O=i(4),z=i(12),W=i(10),B=i(8),G=i(24),V=i(20),J=i(40),Q=i(14),K=q.create(),X=K;q.mix(K,F,{_template:'<div><div style="font-size:14px;text-align:center;">笔记加载中...</div></div>',listeners:[{name:"render",type:"custom",handler:function(){var t=this,e=t.rawConfig;V.getEditor(["hEditor","mdEditor"],(function(i){R=i.hEditor,U=i.mdEditor,t.fetchData((function(i){var n=e.defaultTilte;t.noteId=i.noteId,t.isEdit=!!t.noteId,t.isMd="1"===H.id(i.contentType),!t.isEdit&&n&&(i.title=n.length<=30?n:n.substr(0,27)+"..."),t.initHtml(),t.initTitle(),t.initEditor(),t.initTagIpt((i.allTags||"").split(",")),t.val(i),t.popup.fixPosition(),t.isMd&&e.mdAttach&&t.attachContent(e.mdAttach),!t.isMd&&e.contentAttach&&t.attachContent(e.contentAttach)}))}))}}],show:function(t){var e=new K(t=t||{}),i=O.wrap(e,{title:"编辑笔记",width:960,content:e.html(),ok:function(){return e.check()&&e.saveNote((function(e){i.close(),t.ok&&t.ok()})),!0},cancel:function(){return e.delDraft((function(){i.close()})),!0},listeners:{destroy:function(){e.contentIpt&&e.contentIpt.destroy()}}});return i.getEl(".pop-close").remove(),e}},{initialize:function(t){this.frequency=z.frequency(250),this.noteId=t.noteId,this.entityId=t.entityId,this.entityType=t.entityType},initHtml:function(){this.getEl().html(['<div class="js-editor"></div>','<div class="notes-tag-edit js-tags"></div>'].join(""))},initTitle:function(){var t=this.getEl();this.titleIpt=new G({renderTo:t.find(".js-title"),placeholder:"笔试笔记标题",clsIpt:"edit-notes-title",listeners:{change:H.bind(this.saveDraft,this),blur:function(){(this.val()||"").length>30?this.setErrorTips("长度不能超过30"):this.none()}}})},initEditor:function(){var t=this,e=t.getEl(),i=t.isMd?U:R;t.contentIpt=new i({renderTo:e.find("div.js-editor"),height:180,noToolbarFixed:!0,noAutoHeight:!0,needChangeEditor:!t.isEdit,content:"",draftChange:H.bind(t.saveDraft,t),afterCreate:function(){t.popup.fixPosition()},afterChangeEditor:function(e){t.contentIpt=e}})},initTagIpt:function(t){var e=this.getEl("div.js-tags");this.tagsIpt=new J({renderTo:e,common:t,limitStr:[" ",","],width:e.width(),listeners:{change:H.bind(this.saveDraft,this)}})},attachContent:function(t){if(!t)return;var e=this.contentIpt;if(e.isMd){var i=e.text()+"\n\n"+t;return void e.text(i)}e.waitCreated((function(){var i=N(e.getEditorDoc().body),n=e.getEditor(),o=N("<div><br /></div>");i.append(t),i.append(o),B.scrollToEl({scrollEl:e.getEditorWin(),el:o});try{n.focus(),n.cmd.range.selectNode(o.get(0)),n.select()}catch(a){}}))},val:function(t){var e=this,i=e.isEdit,n=e.contentIpt,o=n.isMd;if(0===arguments.length)return{noteType:"1",title:"",contentType:o?"1":"0",content:n.val(),mdContent:o?n.text():"",entityId:i?undefined:e.entityId,entityType:i?undefined:e.entityType,tags:e.tagsIpt.val().join(",")};n[o?"text":"val"](t[o?"mdContent":"content"]);var a=H.map(W.split(t.draftTags||"",","),(function(t){return{text:t,value:t}}));a.length>0&&e.tagsIpt.val(a)},valDraft:function(){var t=this.val();return t.draftType=Q.draftType.note,t.entityId=this.entityId,t.entityType=this.entityType,t},check:function(){if(this.val().title.length>30)return this.titleIpt.setErrorTips("长度不能超过30"),!1;return!0},saveDraft:function(){var t=this;t.frequency((function(){s.a.saveDraft({body:t.valDraft()})}))},delDraft:function(t){var e=this;O.confirm("取消将清除本次所编辑内容的草稿，确定删除本次草稿吗？",(function(){s.a.delDraft({body:{draftType:Q.draftType.note,entityId:e.entityId,entityType:e.entityType},always:t})}))},saveNote:function(t){var e=this,i=!!e.isEdit;if(!i&&e.isSaving)return;!i&&(e.isSaving=!0),s.a[i?"editNote":"newNote"]({body:e.val(),params:{noteId:i?e.noteId:null},call:function(){O.tips("操作成功"),t&&t()},error:function(t){O.alert(t.msg)},always:function(){e.isSaving=!1}})},fetchData:function(t){var e=this;s.a.getNoteData({query:{noteId:e.noteId,entityId:e.entityId,entityType:e.entityType},call:function(e){t&&t(e.data||{})},error:function(t){e.popup.close(),O.alert(t.msg)}})}});var Y=i(2),Z=i(18),tt=i(0),et=i(8),it=i(4),nt=i(56),ot=i(17),at=i(25),st=i(55),rt=i(29);e.a={publishJob:function(t){t=t||{},at.click({cls:t.cls||".js-publish-job",needLogin:!0,call:function(t,e){t.preventDefault();var i=ot.getUser(),n=tt.id(i.authenticationUserType);if("0"!==n&&"2"!==n)return T.show({type:n});var o=ot.isInDev()?"http://d.hr.nowcoder.com/login-more?autoLoginType=1":"https://hr.nowcoder.com/login-more?autoLoginType=1";if(+i.relationHrId>0)return window.open(o);A.show({listeners:{ok:function(t){t.location.href=o,location.reload()}}})}})},follow:function(t){var e=t.followCls||"js-follow",i=t.unfollowCls||"js-unfollow",n="followStr"in t?t.followStr:"收藏",a="followedStr"in t?t.followedStr:"已收藏",s=tt.id(t.followCount)?+t.followCount:-1,r=t.followCb||function(){},c="."+e+", ."+i,l=Y(c);if(l.addClass("nc-req-auth"),!ot.isLogin())return;t.noHover||et.hover(Y(c),(function(){d(Y(this),!0)}),(function(){d(Y(this))}));return Y(document).on("click",c,(function(n){t.stopPropagation&&n.stopPropagation();var a=Y(n.currentTarget);if(!Z.mark(a)){var c={id:t.entityId,type:t.entityType};t.entityCb&&(c=t.entityCb(n));var l=a.hasClass(i);l&&(t.noPopup?p():st.show({entityId:c.id,entityType:c.type,isEdit:!0,ok:tt.bind(u,null,!1,c),cancel:p,close:function(){Z.clear(a),r("",s)}})),!l&&o.a.follow({body:c,call:function(){a.removeClass(e).addClass(i),s>=0&&(s+=1),d(a),!t.noPopup&&st.show({entityId:c.id,entityType:c.type,isEdit:!1,ok:tt.bind(u,null,!0,c),cancel:tt.bind(r,null,"new",s),close:tt.bind(r,null,"new",s)}),t.noPopup&&r("new",s)},error:function(t){return it.alert(t.msg)},always:function(){return Z.pause(a)}})}function p(){o.a.unfollow({body:c,call:function(){a.removeClass(i).addClass(e),s>=0&&(s=Math.max(0,s-1)),d(a),!t.noTips&&it.tips("操作成功"),r("cancel",s)},error:function(t){return it.alert(t.msg)},always:function(){return Z.pause(a)}})}})),{update:function(t){s=tt.id(t)?+t:-1,d(l)}};function d(e,o){var r=s>=0?"("+s+")":"",c=e.hasClass(i),l=(c?a:n)+r;if(t.renderResult){var d=c&&o;d&&e.text("编辑收藏"),!d&&t.renderResult(e,c,s,c?a:n)}else c&&e.text(o?"编辑收藏":l),!c&&e.text(l)}function u(t,e,i){if(!t||i.length>0)return o.a[t?"createFollowTags":"editFollowTags"]({body:tt.extend(e,{tags:i.join(",")}),call:function(){it.tips("操作成功"),r(t?"new":"edit",s)},error:function(t){return it.alert(t.msg)}});it.tips("操作成功"),r("new",s)}},correction:function(t){var e=Y(t.el);if(!t.entityType||!t.entityId)return;e.on("click",(function(e){e.preventDefault(),M.a.show({entryType:t.entityType,entryId:t.entityId})}))},note:function(t){if(!t.entityType||!t.entityId)return;var e=tt.map(t.editCls,(function(t){return"."+t})).join(","),i=tt.map(t.foldCls,(function(t){return"."+t})).join(",");if(Y(e).addClass("nc-req-auth"),!ot.isLogin())return;e&&Y(document).on("click",e,(function(){X.show({defaultTilte:t.defaultTilte,entityId:t.entityId,entityType:t.entityType,ok:t.ok})})),i&&Y(document).on("click",i,(function(e){e.preventDefault();var i=Y(t.container);i[i.hasClass("open")?"removeClass":"addClass"]("open")})),t.delCls&&t.noteId&&Y("."+t.delCls).on("click",(function(e){it.confirm("删除了不可恢复，是否确认删除？",(function(){s.a.delNote({params:{noteId:t.noteId},call:function(){it.tips("操作成功",(function(){t.del?t.del():window.location.reload()}))},error:function(t){it.alert(t.msg)}})}))}))},clock:function(t){var e=Y(t.el);if(e.addClass("nc-req-auth"),!ot.isLogin())return;var i=+e.attr("data-count")||0,n=rt.extend(b.a);e.on("click",(function(o){var a=new n({propsData:{from:"clock"}});a.$on("published",(function(n){var o=null;a.popup&&a.popup.close(),t.ok||(e.closest("div.sign-main").find("div.sign-info a").html(i+1),e.replaceWith('<a href="/profile/'+window.globalInfo.ownerId+'/clockInfo" class="btn btn-default">已打卡</a>')),window.setTimeout((function(){return o=it.mask("请稍等...")})),window.setTimeout((function(){o&&o.hide();var e=w.show({data:n});t.ok&&e.popup.listen("close",t.ok)}),2e3)})),a.$watch("clock",(function(){return a.$nextTick((function(){return a.popup&&a.popup.fixPosition()}))})),it.wrap(a,{width:750,title:"每日学习打卡",hasNoFooter:!0})}))},shieldQuestion:function(t){var e=t.shieldCls||"js-shield",i=t.unShieldCls||"js-unshield",n=t.shieldStr||""===t.shieldStr?"屏蔽本题":t.shieldStr,a=t.shieldedStr||""===t.shieldedStr?"取消屏蔽":t.shieldedStr,s="."+e+", ."+i,r=Y(s);if(r.addClass("nc-req-auth"),!ot.isLogin())return;tt.forEach(r,(function(t){Y(t).attr("title",Y(t).hasClass(e)?"屏蔽该题，该题将不会出现在以后的组卷中。":"取消屏蔽后，该题可能会再次出现在以后的组卷中。")})),r.addClass("js-nc-title-tips"),nt.title(".js-nc-title-tips"),Y(document).on("click",s,(function(s){var r=Y(s.currentTarget),c=r.hasClass(e);function l(){o.a.questionShield({body:{qid:t.entityId,isShield:c},call:function(){r.removeClass(c?e:i).addClass(c?i:e),r.html(c?a:n),r.attr("title",c?"取消屏蔽后，该题可能会再次出现在以后的组卷中。":"屏蔽该题，该题将不会出现在以后的组卷中。"),it.tips("操作成功")},error:function(t){it.alert(t.msg)},always:function(){Z.pause(r)}})}c&&it.confirm("确定屏蔽该题后，该试题将再也不会出现以后的组卷中。",l),!c&&!Z.mark(r)&&l()}))},markQuestion:function(t){var e=t.markCls||"js-mark",i=t.unMarkCls||"js-unmark",n=t.markStr||""===t.markStr?"标记一下":t.markStr,a=t.markedStr||""===t.markedStr?"已标记":t.markedStr,s="."+e+", ."+i;et.hover(Y(s),(function(){c(Y(this),!0)}),(function(){c(Y(this))}));var r=Y(s);if(r.addClass("nc-req-auth"),!ot.isLogin())return;function c(t,e){t.hasClass(i)&&t.text(e?"取消标记":a)}r.hasClass(e)&&r.attr("title","标记该题，着重查看。"),r.addClass("js-nc-title-tips"),nt.title(".js-nc-title-tips"),Y(document).on("click",s,(function(s){var r=Y(s.currentTarget),c=r.hasClass(e);Z.mark(r)||o.a.questionMark({body:{qid:t.entityId,tid:t.testId,isMark:c},call:function(){c&&r.removeClass(e).addClass(i).removeAttr("data-title"),!c&&r.removeClass(i).addClass(e).attr("data-title","标记该题，着重查看。"),r.html(c?a:n),tt.forEach(t.dtkEls,(function(e){if((e=Y(e)).attr("data-qid")===t.entityId)return e[c?"addClass":"removeClass"]("mark-spot"),tt.BREAK}))},error:function(t){it.alert(t.msg)},always:function(){Z.pause(r)}})}))}}},38:function(t,e,i){var n=i(7);t.exports={url:{createImg:"/helper/share/pic",log:"/share-record/add"}},n.add(t.exports,t.exports.url)},399:function(t,e,i){i(36),t.exports=i(587)},40:function(t,e,i){var n=i(2),o=i(0),a=i(3),s=i(8),r=i(6),c=i(12),l=i(61),d=i(52),u=t.exports=a.create();a.mix(u,r,{_template:["<div>",'<div class="tags-input-wrap js-tag-wrap" style="margin:0;display:block;">','<label class="icon-tag"></label>','<div class="tags-input-cont" style="cursor:text">','<div class="tag-label-box js-tag-home">','<span class="js-input-wrap">','<input type="text" class="js-input" style="width:5px;padding-left:0;padding-right:0;">',"</span>","</div>","</div>","</div>",'<div class="js-error" style="color:#ff5000;font-size:12px;"></div>','<div class="pop-common-wrap js-common-wrap" style="display:none;">',"<span>常用:</span>",'<div class="pop-common-label js-common-tag"></div>',"</div>","</div>"].join(""),listeners:[{name:"render",type:"custom",handler:function(){var t=this.rawConfig;this.getEl();this.input=this.getEl(".js-input"),this.resize(),this.initIpt(),this.initCommon(),this.initSuggest(),t.value&&this.val(t.value)}}]},{initialize:function(t){this.tagList=[],this.suggestMap={},t.maxTagLength=+t.maxTagLength||20},initIpt:function(){var t,e=this,i=e.rawConfig,a=e.getEl(),r=a.find(".js-tag-wrap"),l=(a.find(".js-input-wrap"),e.input),d=c.frequency(20);function u(t){var i=e.tagList,n=i.length;if(!l.val()&&n>0){var o=i[n-1];e.delTag(o),e.suggest&&e.suggest.attach.fixPosition()}}function p(t){t.preventDefault();var a=(e.suggest||{}).keyboardItem;if(!(a&&a.index>=0)){var s=n.trim(l.val());if(s){var r=e.suggestMap[s];if(!r){if(i.noCustom)return e.showError("暂不支持自定义，请选择已有标签");if(s.length>i.maxTagLength)return e.showError("标签最长"+i.maxTagLength+"个字符");if(!!o.find(i.limitStr,(function(t){return s.indexOf(t)>=0})))return e.showError("标签中包含非法字符")}e.addTag(r?{text:r.text,value:r.value}:{text:s,value:s}),e.input.val(""),e.fixIptWidth(),e.suggest&&e.suggest.attach.fixPosition()}}}r.on("click",(function(){l.focus()})),s.bindChange(l,(function(){d((function(){e.fixIptWidth(),e.showError(!1)}))})),l.on("focus",(function(){window.clearTimeout(t),r.addClass("focus"),e.showError(!1)})),l.on("blur",(function(){window.clearTimeout(t),t=window.setTimeout((function(){r.removeClass("focus"),e.suggest&&e.suggest.attach.forceHide(),e.fixIptWidth()}),200)})),l.on("keydown",(function(t){var e={8:u,13:p,32:p,188:p}[t.keyCode+""];e&&e(t)})),e.listen("change",(function(){e.fixIptWidth()}))},initCommon:function(){var t=this,e=t.rawConfig,i=t.getEl(),a=i.find(".js-common-tag"),s=[];o.forEach(e.common,(function(t){var e=o.isObject(t)?t:{text:t,value:t};n.trim(e.text)&&s.push(e)}));var r=s.length;if(i.find(".js-common-wrap")[0===r?"hide":"show"](),0===r)return;var c=o.map(s,(function(e){return new d({renderTo:a,text:e.text,value:e.value,needToggle:!0,listeners:{toggle:function(){var i=this.isChecked();i&&t.addTag(e),!i&&t.delTag(t.getTagByVal(e.text))}}})}));t.listen("change",(function(){var e=o.toMap(t.tagList,(function(t){return{key:t.val(),value:!0}}));o.forEach(c,(function(t){t.checked(!!e[t.val()])}))}))},initSuggest:function(){var t=this,e=t.rawConfig,i=t.input;t.getEl();e.getSuggest&&(t.suggest=l.show({input:i,needReWidth:!0,needSame:!0,noCache:!1,rePositionInList:!0,attach:e.attach,noLeave:!0,defaultIndex:e.noCustom?0:-1,reqList:function(t,i){e.getSuggest(t,(function(t){i&&i(t)}))},dealList:function(e){var i=[],n=t.suggestMap,a=o.toMap(t.tagList,(function(t){return{key:t.val()}}));return o.forEach(e,(function(t){n[t.text]=t,!a[t.value]&&i.push(t)})),i},ok:function(e){i.val(""),t.addTag({text:e.text,value:e.value}),t.fixIptWidth(),t.input.focus()}}),t.pushChild(t.suggest))},val:function(t){var e=this;if(0===arguments.length)return o.map(e.tagList,(function(t){return t.val()}));o.forEach(e.tagList,(function(t){t&&t.destroy()})),e.tagList.length=0,o.forEach(t,(function(t){t&&o.isString(t)&&(t={value:t,text:t}),e.addTag(t)}))},check:function(){var t=this.input,e=n.trim(t.val());e&&(t.focus(),this.showError("你还有未保存的收藏标签，请回车生成标签"));return!e},addTag:function(t){var e=this;if((!t||!e.getTagByVal(t.value))&&t&&t.value&&t.text){var i=new d({renderTo:e.getEl(".js-input-wrap"),renderBy:"before",text:t.text,value:t.value,checked:!0,needDel:!0,listeners:{del:function(){e.delTag(this)}}});i.getEl().css("margin","2px"),e.tagList.push(i),e.fire("change","add",t)}},delTag:function(t){var e=this.tagList;if(t&&o.contains(e,t)){this.tagList=o.without(e,t),t.destroy();var i=t.rawConfig;this.fire("change","del",{text:i.text,value:i.value})}},hasVal:function(){return!!(this.input.val()||this.tagList.length>0)},getTagByVal:function(t){return o.find(this.tagList,(function(e){return e.val()===t}))},resize:function(){this.getEl();this.fixIptWidth()},fixIptWidth:function(){var t=this,e=t.rawConfig,i=t.getEl(),o=t.input,a=i.find(".tags-input-cont"),s=+e.iptMinWidth||130,r=a.width(),c=t.hasVal();c&&function(e){var i=o[0],n=o.val();if(n!==t._lastVal){t._lastVal=n;var a=parseFloat(o.css("paddingLeft"))+parseFloat(o.css("paddingRight"));if(o.width(1).css("overflowX","hidden"),i.scrollWidth>1){var s=e&&i.scrollWidth>e,r=s?e-a:i.scrollWidth-a;o.width(r),o.css("overflowX",s?"auto":"hidden")}}}(r),!c&&o.outerWidth(s),!c&&(t._lastVal=null),o.attr("placeholder",c?"":n.trim(e.placeholder)||"输入标签，回车确定")},showError:function(t){var e=this.getEl();e.find(".js-tag-wrap")[t?"addClass":"removeClass"]("error"),e.find(".js-error").html(t||"")}})},400:function(t,e,i){i(2);var n=i(0),o=i(3),a=i(6),s=i(89),r=i(57),c=i(41),l=i(4),d=i(25),u=i(28),p={1:7,2:30,3:90,4:180},f=t.exports=o.create();o.mix(f,a,{_template:'<div class="vote-mod"></div>',listeners:[{name:"render",type:"custom",handler:function(){this.tips(),this.refresh()}},{name:"click .js-vote",handler:function(t){var e=this;d.checkLogin(t.currentTarget,(function(){e.check()&&e.vote((function(t){e.renderVoted(n.extend(t,{hasVote:!0,voteInfo:e.voteData.voteInfo,voteOptions:e.voteData.voteOptions}))}))}))}}]},{initialize:function(t){this.voteId=t.voteId},refresh:function(){var t=this;t.getInfo((function(e){t.voteData=e;var i=e.hasVote||t.ended();t[i?"renderVoted":"renderVote"](e)}),(function(e){t.tips(e)}))},renderVote:function(t){var e=t.voteInfo||{},i=s.execTpl(['<div class="vote-mod-hd">#{vote.title + type}</div>','<div class="vote-mod-bd js-vote-option"></div>','<div class="vote-mod-ft">','<a href="javascript:void(0);" class="btn btn-primary btn-block js-vote">投票</a>',"</div>"],{vote:e,type:"("+{1:"单选",2:"多选"}[e.type]+")"});this.getEl().html(i);var o=this.getEl(".js-vote-option");this.optionCpn=r.mix({items:n.map(t.voteOptions,(function(t){var i=new c({renderTo:o,radio:{1:!0,2:!1}[e.type],text:t.optionTitle,val:n.id(t.optionId)});return i.getEl().css({display:"block","margin-left":"0","margin-bottom":"10px"}),i}))})},renderVoted:function(t){var e=t.voteInfo||{},i=n.toMap(t.hostVote,(function(t){return{key:t,value:!0}})),o=s.execTpl(['<div class="vote-mod-hd">#{vote.title + type}</div>','<div class="vote-mod-bd">','<div v-for="item in items" class="progress-bar-wrapper">','<span class="progress-bar-label">#{item.optionTitle}<span v-if="isSelect(item)" class="font-green">(已选)</span></span>','<span class="progress-bar-text">#{count(item)}票 #{percent(item)}</span>','<div class="progress-bar-box">','<div class="progress-bar-bg"><div class="progress-bar-inner" :style="\'width:\' + percent(item)"></div></div>',"</div>","</div>","</div>",'<div class="vote-mod-ft">',"<a href=\"javascript:void(0);\" class=\"btn btn-default btn-block\">#{ended ? '投票已结束' : '你已投票'}</a>","</div>"],{vote:e,type:"("+{1:"单选",2:"多选"}[e.type]+")",items:t.voteOptions,ended:this.ended(),isSelect:function(t){return!!i[t.optionId]},count:function(e){return(t.countInfo||{})[e.optionId]||0},percent:function(e){return((t.percentInfo||{})[e.optionId]||0)+"%"}});this.getEl().html(o)},vote:function(t){var e=this.optionCpn.val();u.vote({body:{voteId:this.voteId,options:e},call:function(e){t&&t(e.data)},error:function(t){l.alert(t.msg)}})},check:function(){var t=this.optionCpn.val();if(!t||0===t.length)return l.alert("请选择一个选项"),!1;return!0},ended:function(){var t=this.voteData.voteInfo,e=24*(p[t.expiredAt]||0)*3600*1e3;return t.createdAt+e<=(new Date).getTime()},tips:function(t){this.getEl().html('<div style="text-align:center;font-size:14px;padding:20px 0;">'+(t||"加载中...")+"</div>")},getInfo:function(t,e){u.voteInfo({query:{voteId:this.voteId},call:function(e){var i=e.data||{};t&&t(i)},error:function(t){e&&e(t.msg)}})}})},42:function(t,e,i){"use strict";var n=i(5),o=i.n(n),a=i(6),s=i(3),r=i(0),c=i(4),l=i(18),d=(s=i(3),i(20)),u=s.create();e.a=u,s.mix(u,a,{_template:['<div class="pop-recovery-content">','<p class="pop-tip">#{tips}</p>','<div style="margin-bottom:20px;"><span class="js-temp"></span></div>','<div class="submit-btnbox" style="text-align:right;">','<a class="btn btn-primary confirm-btn" href="javascript:void(0);">#{submitTxt}</a>',"</div>","</div>"].join(""),listeners:[{name:"render",type:"custom",handler:function(){this.initEditor()}}],show:function(t){var e=(t=t||{}).entryId,i=t.entryType,n=new u(t),a=c.wrap(n,{title:t.title||"牛客网试题或答案纠错",width:960,content:n.html(),hasNoFooter:!0,noUnique:!0,ok:function(){var s=n.getEl(),d=n.val();if(d&&t.submit)t.submit(d);else if(d&&!l.mark(s)){var u=d+(t.extContent?"\r\n"+t.extContent:"")+"\r\n "+(t.noSubmitUrl?"":'<a href="'+window.location.href+'">'+window.location.href+"</a>"),p={call:function(e){t.call&&t.call(d||null),a.close(),window.setTimeout((function(){c.tips(t.okText||"您的纠错反馈已经提交，我们会尽快处理")}),500)},error:function(t){c.alert(t.msg||"出现错误")},always:function(){l.pause(s)}};if(r.isFunction(t.action))return t.action(r.extend({content:u},p));o.a.correction(r.extend({body:{entryType:i,entryId:e,content:u}},p))}return!0}});return n}},{initEditor:function(){var t=this,e=t.getEl();d.getEditor("hEditor",(function(i){t.ipt=new i({renderTo:e.find(".js-temp"),renderBy:"replaceWith",height:320,noToolbarFixed:!0,noAutoHeight:!0,needChangeEditor:!1,afterCreate:function(){t.popup.fixPosition()},afterChangeEditor:function(e){t.ipt=e}})}))},val:function(){return this.ipt?this.ipt.val():""},_getData:function(t){return{submitTxt:t.submitTxt||"提交错误",tips:t.tips||"我们为新入库的题目提供了纠错入口，欢迎细心的你来纠错，为方便我们更快的排查并修正错误，请你详细描述本题错误："}}})},49:function(t,e,i){"use strict";var n=i(38),o=i.n(n),a=i(31),s=i.n(a),r=i(23),c=i(33),l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},d=i(0),u=i(3),p=i(6),f=i(8),h=i(11),m=i(22),v=i(29),g=i(2),y=i(56),w=i(4),b=i(32),C=i(20),k=i(25),x=i(17),_=u.create();e.a=_,u.mix(_,p,{_showTips:[],_template:'<div class="layer-share-main">#{content}</div>',listeners:[{name:"render",type:"custom",handler:function(){var t=this,e=t.rawConfig;if(!e.shareType||!e.entityId)return t.initShare();t.getImg((function(e){return t.initShare(e)}))}},{name:"click .js-share-feed",handler:function(t){var e,i;if(!x.isLogin())return k.showLogin();"forward"===this.rawConfig.feedType?(e=this.rawConfig,1===(i=e.feedData.type)?s.a.getSummary({query:{postId:e.feedData.sourceId},call:function(t){var i=t.data,n=i.title,o=i.content;c.a.ncPopup({propsData:{data:l({},e.feedData,{ext:JSON.stringify({title:n,content:o})})}})},error:function(t){var e=t.msg;w.alert(e)}}):3===i&&c.a.ncPopup({propsData:{data:l({},e.feedData,{ext:JSON.stringify({commentContent:e.feedData.commentContent})})}})):function(t){var e=new(v.extend(r.a))({propsData:{from:"link",initialContent:{title:""+(t.title||"")+(t.desc||""),url:t.link||window.location.href,icon:"https://uploadfiles.nowcoder.com/images/20190823/6658561_1566555667627_FB5C81ED3A220004B71069645F112867"}}});e.$on("published",(function(t){return e.popup&&e.popup.close()})),e.$watch("link",(function(){return e.$nextTick((function(){return e.popup&&e.popup.fixPosition()}))})),w.wrap(e,{width:750,title:"分享到动态",hasNoFooter:!0,close:function(){e.actionBlur()}})}(this.rawConfig)}},{name:"click .js-share-wx",handler:function(t){var e=this.rawConfig,i=e.wxImg&&this.imgUrl||e.wxLink||e.link||window.location.href;b.wx(h.rqUrl(i))}},{name:"click .js-share-img",handler:function(t){var e=this.rawConfig;C.shareImg({shareType:e.shareType,entityId:e.entityId})}},{name:"click .layer-share-item",handler:function(t){var e=g(t.currentTarget),i=g.trim(e.attr("data-to"));i&&this.log(i)}}],show:function(t){if(!t.target||0===t.target.length)return;var e=new _(t),i=y.wrap(e,{target:t.target,content:e.html(),theme:!0,autoWidth:!0,attach:l({zIndex:1001},t.attach)});return t.target.on("click",(function(){var e=i.getEl().is(":hidden");t.target.trigger(e?"mouseenter":"mouseleave")})),i.getEl().addClass("layer-share-tips"),i.getEl(".tooltip-inner").addClass("layer-share-wrapper").css("position","initial"),e},fixStr:function(t){return(t||"").replace(/\r|\n/g,"").replace(/\s+/g," ")},fixContent:function(t){return(t=this.fixStr(t)).length>100?t.substring(0,100)+"...":t}},{initShare:function(t){var e=this.rawConfig,i=e.link||window.location.href;m.bind({el:this.getEl('.js-share-link[data-share="weibo"]'),title:e.title,desc:e.desc,link:i,image:t,searchPic:"false",account:"牛客网"}),m.bind({el:this.getEl('.js-share-link[data-share="fqq"]'),title:(e.title||"")+(e.title?" ":"")+(e.desc||"")+" 来自@牛客网",link:i,image:t,account:"牛客网"}),f.copy({el:this.getEl(".js-copy-link"),content:i,call:function(){return w.tips("复制成功!")},error:function(){return w.alert("复制失败!")}}),e.noTxt&&this.getEl(".js-txt").hide()},getImg:function(t){var e=this,i=e.rawConfig;o.a.createImg({query:{shareType:i.shareType,entityId:i.entityId},call:function(i){e.imgUrl=i.data,t&&t(i.data)},error:function(e){t&&t("")}})},log:function(t){var e=this.rawConfig;o.a.log({body:{url:e.link||window.location.href,shareTo:t,entityId:e.entityId||1,shareType:e.logType}})},_getData:function(t){var e=t.btn||["feed","img","wx","qq","weibo","link"],i={feed:'<div class="layer-share-item js-share-feed" data-to="6"><i class="ico-nc-share4"></i><p class="js-txt">转发到动态</p></div>',img:'<div class="layer-share-item js-share-img" data-to="5"><i class="ico-picture"></i><p class="js-txt">生成图片</p></div>',wx:'<div class="layer-share-item js-share-wx" data-to="1"><i class="ico-nc-wechat"></i><p class="js-txt">微信</p></div>',qq:'<div class="layer-share-item js-share-link" data-share="fqq" data-to="2"><i class="ico-nc-qq"></i><p class="js-txt">QQ</p></div>',weibo:'<div class="layer-share-item js-share-link" data-share="weibo" data-to="3"><i class="ico-nc-weibo"></i><p class="js-txt">微博</p></div>',link:'<div class="layer-share-item js-copy-link" data-to="4"><i class="ico-nc-link" data-type="4"></i><p class="js-txt">复制链接</p></div>'};return{content:d.map(e,(function(t){return i[t]||""})).join("")}}})},5:function(t,e,i){var n=i(7);t.exports={url:{reserve:"/reserve/#{paperId}/do",unReserve:"/reserve/#{paperId}/undo",isFollow:"/sns/is-follow",follow:"/sns/follow",unfollow:"/sns/unfollow",multiFollow:"/sns/multi_follow",multiUnfollow:"/sns/multi_unfollow",getFollowData:"/sns/followdata",createFollowTags:"/sns/followtags/create",editFollowTags:"/sns/followtags/edit",updateFollowTag:"/sns/followtags/update",like:"/sns/like",unlike:"/sns/del_like",comment:"/comment/create",delComment:"/comment/delete",getComment:"/comment/list",getUserComment:"/comment/self-comment",getCommentByPage:"/comment/listByPage",getCommentByPageV2:"/comment/list-by-page-v2",getCommentPageNum:"/comment/pageNum",getWonderfulCommentList:"/comment/woderful/list",newWonderfulComment:"/comment/wonderful",delWonderfulComment:"/comment/unwonderful",getAcceptedList:"/comment/accepted/list",acceptComment:"/comment/accept",newLitigantComment:"/comment/litigant",delLitigantComment:"/comment/un-litigant",getRefAnswer:"/comment/recommendComment?questionId=#{questionId}",getCaptcha:"/captcha/#{type}",correction:"/corrections/v2",setRefAnswer:"/audit/setReferAnswerFromCmt",unsetRefAnswer:"/audit/unsetReferAnswerFromCmt",setRightAnswer:"/audit/setRightAnswer",getLikeUsers:"/sns/likeUsers",testPing:"/test/updateInfo",testRestart:"/test/restart",testStop:"/test/stop",testContestPing:"/contest/updateInfo",saveAnswerDraft:"/answer/draft/save",getAnswerDraft:"/answer/draft/get",editAnswer:"/comment/editAnswer",getQuestionInfo:"/getQuestionInfo",wantAnswer:"/want-answer/want",cancelWantAnswer:"/want-answer/cancel",getQuestionQr:"/qr/question/#{uuid}",addLeave:"/contest/addLeave",getLatestSubmission:"/practice/latestSubmission",getLatestAcceptSubmission:"/practice/latestAcceptSubmission",sendCtsPhoneCode:"/cts/phone_code",validateCtsPhoneCode:"/cts/validate_phone_code",correctPerson:"/test/code/lanuage",questionShield:"/question/shield",questionMark:"/question/mark",blackUser:"/sns/black",unblackUser:"/sns/unblack",blockUser:"/sns/shield",unblockUser:"/sns/un-shield"}},n.add(t.exports,t.exports.url)},52:function(t,e,i){i(2),i(0);var n=i(6),o=i(3),a=t.exports=o.create();o.mix(a,n,{_template:['<#{tag} class="tag-label">','<span class="js-text"></span>',"</#{tag}>"].join(""),listeners:[{name:"render",type:"custom",handler:function(){var t=this.rawConfig;"span"!==t.tag&&this.getEl().attr("href","javascript:void(0);"),t.text&&this.text(t.text),t.checked&&this.checked(),t.needDel&&this.needDel(),t.disabled&&this.disabled()}},{name:"click",handler:function(){this.rawConfig.needToggle&&this.checked(!this.isChecked()),!this.isDisabled()&&this.fire("click")}},{name:"click.stop .js-del",handler:function(){this.fire("del")}}]},{text:function(t){var e=this,i=e.getEl(".js-text");if(0===arguments.length)return i.text();i.text(t)},val:function(){return this.rawConfig.value},checked:function(t){var e=this,i=this.getEl();e.isChecked()!==(t=!1!==t)&&(i[t?"addClass":"removeClass"]("selected"),this.fire("toggle"))},isChecked:function(){return this.getEl().hasClass("selected")},disabled:function(t){t=!1!==t,this.getEl()[t?"addClass":"removeClass"]("disabled"),this.needDel(!t&&this.rawConfig.needDel)},isDisabled:function(){return this.getEl().hasClass("disabled")},needDel:function(t){var e=this.getEl(".js-del");(t=!1!==t)&&!e.get(0)&&this.getEl().append('<span class="del-tag js-del">x</span>'),!t&&e.get(0)&&e.remove()},showDel:function(t){return this.getEl(".js-del").css("display",!1===t?"none":"")},_getData:function(t){return{tag:"span"===t.tag?"span":"a"}}})},53:function(t,e,i){"use strict";var n={props:["level","name","iconCls"]},o=i(1),a=Object(o.a)(n,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("a",{staticClass:"js-nc-title-tips",attrs:{title:t.name,href:"/user/authentication",target:"_blank"}},[i("img",{"class":t.iconCls,attrs:{src:"//static.nowcoder.com/nc/image/identity/"+t.level+".png"},on:{load:function(e){return t.$emit("load")}}})])}),[],!1,null,null,null).exports;a.install=function(t){return t.component(a.name,a)};e.a=a},55:function(t,e,i){i(2);var n=i(6),o=i(3),a=i(0),s=i(10),r=i(4),c=i(40),l=i(28),d=t.exports=o.create();o.mix(d,n,{_template:'<div><div style="font-size:14px;text-align:center;">数据加载中...</div></div>',listeners:[{name:"render",type:"custom",handler:function(){var t=this,e=t.getEl();t.fetchTags((function(i,n){e.html(""),t.initCpn(i,n),t.initBtn(),t.popup.fixPosition()}))}}],show:function(t){var e=new d(t=t||{});r.wrap(e,{title:t.isEdit?"修改收藏":"收藏成功",content:e.html(),width:630,hasNoFooter:!!t.isEdit,ok:function(){if(!e.tagInput.check())return!0;var i=a.uniq(e.tagInput.val());t.ok&&t.ok(i)},cancel:function(){},listeners:{cancel:t.cancel,close:t.close}});return e}},{initCpn:function(t,e){var i=this,n=i.getEl();i.tagInput=new c({renderTo:n,common:a.map(e,(function(t){return{text:t,value:t}})),value:a.map(t,(function(t){return{text:t,value:t}})),listeners:{change:function(){i.fire("change")}}})},initBtn:function(){var t=this.rawConfig,e=this.getEl();t.isEdit&&e.append(['<div class="pop-collect-tag" style="margin-top:20px;">','<a href="javascript:void(0);" class="btn btn-primary confirm-btn">修改收藏标签</a>','<div class="cut-line"><span class="cut-txt">或者</span></div>','<a href="javascript:void(0);" class="btn btn-warn cancle-btn">删除收藏</a>',"</div>"].join(""))},fetchTags:function(t){var e=this,i=e.rawConfig,n={id:i.entityId,type:i.entityType};i.isEdit&&(n.isEdit=!0),l.getFollowData({query:n,call:function(e){var i=s.split(e.data.allTags,","),n=s.split(e.data.draftTags,",");t&&t(n,i)},error:function(t){i.isEdit&&(e.popup.close(),r.alert(t.msg))}})}})},57:function(t,e,i){var n=i(2),o=i(0),a=i(37),s=i(3),r=i(41),c=t.exports=s.create();o.extend(c,{mix:function(t){return new c(t)}}),o.extend(c.prototype,a,{initialize:function(t){var e=this;e.rawConfig=t,e.option=[],e._lastChecked=null,o.forEach(t.listeners,(function(t,i){e.listen(i,t)})),t.el?o.forEach(t.el,(function(t){e.addItemEl(t)})):t.items&&o.forEach(t.items,(function(t){e.addItem(t)}));e.radio=!!e.option[0]&&e.option[0].isRadio()},checked:function(){var t=o.filter(this.option,(function(t){return t.isChecked()}));return this.radio?t[0]:t},isAllChecked:function(){for(var t=this.option,e=0,i=t.length;e<i;e++)if(!t[e].isChecked())return!1;return!0},val:function(t,e){if(t===undefined||null===t){var i=this.checked();return this.radio?i&&i.val():o.map(i,(function(t){return t.val()}))}if(this.radio||!o.isArray(t))return void o.forEach(this.option,(function(i){i.checked(!1),i.val()===t&&(i.checked(!0),e&&i.fire("change"))}));var n=this.array2Map(t);o.forEach(this.option,(function(t){t.checked(!1),n[t.val()]&&(t.checked(!0),e&&t.fire("change"))}))},addItemEl:function(t){t=n(t);var e=r.transform(t);this.addItem(e)},addItem:function(t){var e=this,i=e.isDisabled();t.listen("change",(function(){e._change(t)})),e.option.push(t),t.disabled(i)},isDisabled:function(){var t=this.option||[];return t.length>0&&o.every(t,(function(t){return t.isDisabled()}))},disabled:function(){var t=this,e=arguments;o.forEach(t.option,(function(t){t.disabled.apply(t,e)}))},array2Map:function(t){return o.toMap(t,(function(t){return{key:t}}))},_change:function(t){var e=this.rawConfig;if(this.radio){if(this._lastChecked===t)return void t.checked(!0);this._lastChecked=t,o.forEach(this.option,(function(t){t.checked(!1)})),t.checked(!0),this.fire("change",t),e.change&&e.change.call(this,t)}else this.fire("change",t),e.change&&e.change.call(this,t)}})},587:function(t,e,i){"use strict";i.r(e);var n=i(2),o=i(0),a=i(3).create(),s=a;o.extend(a.prototype,{initialize:function(t){this.data={user:t.user,post:t.post,comment:t.comment,info:t.info,navHeight:t.navHeight,isLogin:!!t.isLogin,isAdmin:!!t.isAdmin},this._cacheEl={},this.render&&this.render()},getContentDv:function(){return this._getEl("contentDv",(function(){return n("div.post-topic-main div.post-topic-des")}))},getTitleDv:function(){return this._getEl("titleDv",(function(){return n(n("h1.discuss-title")[0])}))},getPostTitle:function(){return(this.getTitleDv().text()||"").replace(/\r|\n/g,"").replace(/\s+/g," ")},_getEl:function(t,e){return!this._cacheEl[t]&&(this._cacheEl[t]=e()),this._cacheEl[t]}});var r=i(49),c=i(2),l=i(0),d=i(3),u=i(12),p=i(10),f=i(37),h=d.create(),m=h;d.mix(h,s,null,{render:function(){var t=this,e=c(window),i=t.data,n=i.post,o=i.navHeight,a=!1,s=0,d=c("div.editor-box").closest("div.module-box"),h=!!d.get(0),m=c(".discuss-topic-head"),v=m.find(".discuss-title"),g=c(v.get(0).cloneNode(!0)).addClass("js-fixed-title fixed-title").css("top",o).hide().appendTo(m);g.append(p.execTpl(['<div class="discuss-tool-bar">','<a href="javascript:void(0);" class="link-gray app-item js-app-item" data-url="#{appItemUrl}"><i class="icon-mobile-phone"></i>APP内打开</a>','<a href="javascript:void(0);" class="link-gray js-share"><i class="icon-nc-share3"></i>分享给朋友</a>','<a href="javascript:void(0);" class="link-gray js-fix-like nc-req-auth #{likeCls}"><i class="icon-thumbs-up"></i><span>#{likeTotal}</span></a>','<a href="javascript:void(0);" class="link-gray #{followCls}"><i class="icon-star"></i><span>#{followCount}</span></a>','<a href="javascript:void(0);" class="link-gray nc-req-auth js-post-replay"><i class="icon-comment"></i><span>#{cmtCount}</span></a>',"</div>"].join(""),{likeCls:n.isLiked?"link-green":"",followCls:n.isFollowed?"js-fix-unfollow link-green":"js-fix-follow",likeTotal:n.likeTotal||0,followCount:n.followTotal||0,cmtCount:n.cmtTotal||0,appItemUrl:n.qrCodeUrl||""}));var y=m.outerHeight(),w=g.outerHeight(),b=m.offset().top,C=u.frequency(10);function k(){C((function(){var t,i=e.scrollTop(),n=i+o,r=s>=i,c=n+w+1>=b+y;s=i,(t=!(r||!a||c)||(r&&a?n>b&&(!h||n+w<d.offset().top):c&&(!h||n+w<d.offset().top)))&&!a?(a=!0,g.fadeIn(200,(function(){return f.fire("titleFixed",g)}))):!t&&a&&(g.hide(),a=!1,f.fire("titleCancelFixed",g))}))}e.on("scroll",k),k(),x=t.getContentDv(),_=t.data.post,j=_===undefined?{}:_,T="「"+c(".js-post-title").text()+"」 "+(x.text()||"").replace(/\r|\n/g,"").replace(/\s+/g," "),I=T.length>100?T.substring(0,100)+"...":T,E={logType:"2",entityId:n.id,target:t.shareBtn,btn:["feed","wx","qq","weibo","link"],desc:I,link:window.location.href,feedType:"forward",feedData:{type:1,circle:-1,sourceId:j.id,sourceType:j.entityType,ownerView:{ownerType:0,user:{userId:j.authorId}}}},r.a.show(l.extend(E,{target:c(".js-share")}));var x,_,j,T,I,E}});var v=i(23),g=i(84),y=i(2),w=i(0),b=i(3),C=i(29),k=i(10),x=i(19),_=i(37),j=i(66),T=i(17),I=i(48),E=i(4),S=b.create();b.mix(S,s,null,{render:function(){this.initAccept(),this.initCmtWonderful(),this.initCmt(),this.initEditor(),this.initOrder()},initOrder:function(){var t=this,e=y(".js-comment-order-type");if(0===e.length)return;var i=t.valCmtOrder(),n=new j({renderTo:e,renderBy:"replaceWith",cls:"reply-rank-oprt",size:"small",autoWidth:!0,options:[{text:'<i class="ico-discuss-reply ico-earlier"></i>默认排序',value:"1",checked:"1"===i},{text:'<i class="ico-discuss-reply ico-nearly"></i>较近在前',value:"0",checked:"0"===i},{text:'<i class="ico-discuss-reply ico-liked"></i>较赞在前',value:"2",checked:"2"===i}],change:function(){var e=this.val();(t.cmtList||{}).order=e,t.valCmtOrder(e)}});n.attachSel.getEl(0).addClass("reply-rank-oprt"),n.attachSel.attach.listen("attachShow",(function(){var t=n.attachSel.getEl();t.find("li.js-option").show(),t.find("li.js-option.selected").hide()}))},initAccept:function(){var t=this,e=t.data,i=e.post,n=y("div.js-accept-list"),o=w.id(i.postType),a=t.cmtAcceptList=g["default"].show({el:t.createDv(n.find(".module-body").html("")),propsData:{id:i.id,type:i.entityType,config:{isAccept:!0,isNeedLitigant:!0,isNeedWonderful:!0,isNeedShare:!0,isAdmin:e.isAdmin,isDisableReply:!!i.commentDisable,isNoNameCard:!!{101:!0}[o],entityUid:i.authorId,currentUid:e.user.ownerId,extHeight:-1*(e.navHeight+y(".js-fixed-title").outerHeight()),extGetListParam:{101:{postType:101}}[o]}}});a.$on("listDataChange",(function(t){return n[(t.totalCount||0)>0?"show":"hide"]()})),a.$on("wonderfulCmt",(function(e){return t.refreshCmt([a])})),a.$on("litigantCmt",(function(){return t.refreshCmt([a])})),a.$on("itemMounted",(function(e){return t.fixCmtItem(e,i)}))},initCmtWonderful:function(){var t=this,e=t.data,i=e.post,n=y("div.js-wonderful-list"),o=w.id(i.postType),a=t.cmtWonderfulList=g["default"].show({el:t.createDv(n.find(".module-body").html("")),propsData:{id:i.id,type:i.entityType,config:{isWonderful:!0,isNeedLitigant:!0,isNeedWonderful:!0,isNeedShare:!0,isNoShareAction:!0,isAdmin:e.isAdmin,isAward:!!i.hasReward,isDisableReply:!!i.commentDisable,isNoNameCard:!!{101:!0}[o],entityUid:i.authorId,currentUid:e.user.ownerId,extHeight:-1*(e.navHeight+y(".js-fixed-title").outerHeight()),extGetListParam:{101:{postType:101}}[o]}}});a.$on("listDataChange",(function(t){return n[(t.totalCount||0)>0?"show":"hide"]()})),a.$on("wonderfulCmt",(function(){return t.refreshCmt()})),a.$on("litigantCmt",(function(){return t.refreshCmt([t.cmtWonderfulList])})),a.$on("acceptCmt",(function(){return t.refreshCmt()})),a.$on("itemMounted",(function(e){return t.fixCmtItem(e,i)}))},initCmt:function(){var t=this,e=t.data,i=e.post,n=e.comment,o=y("div.js-comment-list"),a=w.id(i.postType),s=x.getParam("toCommentId"),r=t.cmtList=g["default"].show({el:t.createDv(o.find(".module-body").html("")),propsData:{id:i.id,type:i.entityType,order:t.valCmtOrder(),pageSize:n.pageSize,config:{isNeedLitigant:!0,isNeedWonderful:!0,isNeedSubReport:!0,isNeedShare:!0,isNoShareAction:!0,isAdmin:e.isAdmin,isAward:!!i.hasReward,isDisableReply:!!i.commentDisable,isAutoOpenSubCmt:!0,isNoNameCard:!!{101:!0}[a],isAlertWatering:!0,entityUid:i.authorId,currentUid:e.user.ownerId,currentPage:n.curPage,extHeight:-1*(e.navHeight+y(".js-fixed-title").outerHeight()),extCmts:e.info.feedAd,commentId:s,extGetListParam:{101:{postType:101}}[a],getUserProfileUrl:function(t){return{101:"/acm/contest/profile/"+t}[a]},getLevelClass:function(t){return{101:"rate-score"+t}[a]}}}});r.$on("listDataChange",(function(t){var e=o.find("div.module-head h1");y(".js-post-replay span.feed-legend-num").html(t.totalCount),y(".js-fixed-title .js-post-replay span").html(t.totalCount),e.html(t.totalCount+"条回帖")})),r.$on("wonderfulCmt",(function(){return t.refreshCmt([t.cmtList])})),r.$on("litigantCmt",(function(){return t.refreshCmt([t.cmtList])})),r.$on("acceptCmt",(function(){return t.refreshCmt()})),r.$on("itemMounted",(function(e){return t.fixCmtItem(e,i)}));var c="1"===x.getParam("toCommentIpt");(s||c)&&window.setTimeout((function(){return!s&&c&&_.fire("POST_TERMINAL_GO_CMT_INPUT")}),1e3)},initEditor:function(){var t=this;if(!y("#jsReply").get(0))return;var e=C.extend(v.a);t.publisher=new e({propsData:{from:"reply",hash:t.data.post.id}});var i=t.data.info,n=t.publisher.$createElement("span",["回帖"]);t.publisher.$slots["default"]=[n],t.publisher.$mount("#jsReply"),t.publisher.$on("publish",(function(e){var n=e.type,o=e.content,a=e.extData,s=a===undefined?{}:a,r=e.toFeed,c=e.atRecord,l=e.subjectRecord,d=k.encodeHTML(o);if(w.forEach(c,(function(t){var e=t.id,i=t.nickname,n=k.searchRegExp("@"+i);d=d.replace(n,'<a data-card-uid="'+e+'" href="javascript:void(0);">@'+i+"</a>")})),i.guideSubjectId&&l.push({id:i.guideSubjectId,content:i.guideSubjectContent}),w.forEach(l,(function(t){var e=t.id,i=t.content,n=new RegExp("#"+i+"#","gi");d=d.replace(n,'<a data-card-subject-id="'+e+'" href="javascript:void(0);">#'+i+"#</a>")})),2===n)var u=s.imgs||[],p=w.map(u,(function(t){return'<img src="'+t.src+'" alt="'+t.alt+'" width="'+t.width+'" height="'+t.height+'">'})).join("");t.publisher.publishing=!0,t.cmtList.addCmt({toFeed:r,content:2===n?d+'<div class="nc-feed-reply-imgs-slideshow">'+p+"</div>":d,contentV2:JSON.stringify({pureText:o,imgs:u}),call:function(){t.publisher.clear(),_.fire("POST_TERMINAL_GO_CMT_INPUT")},error:function(t){var e=t.msg;E.alert(e)},always:function(){t.publisher.publishing=!1}})})),t.data.info.guideSubjectId&&t.initInsertSubject(t.publisher)},initInsertSubject:function(t){var e=this,i=y('<div class="tooltip top tooltip-info" style="top: -35px; left: 0px;"></div>');i.append('<div class="tooltip-arrow"><i></i></div>');var n=y('<div class="tooltip-inner"></div>'),o=y('<a href="javascript:void(0)" class="topic-txt">'+e.data.info.guideSubjectContent+"</a>"),a=y('<a href="javascript:void(0)" class="icon-nc-close"></a>');n.append("#").append(o).append("#").append(a),i.append(n),y(".feed-topic-entry").append(i);var s="SUBJECT_GUIDE_"+T.getUid()+"_"+e.data.post.id+"_"+o.text(),r=T.isLogin();if(r&&(I.get(s)||{}).isClose)return i.hide();function c(){i.hide(),r&&I.set(s,{isClose:!0})}i.show(),a.on("click",(function(t){t.stopPropagation(),c()})),o.on("click",(function(i){i.stopPropagation(),t.actionSubject(e.data.info.guideSubjectContent)})),t.$on("input-subject",c)},refreshCmt:function(t){this.cmtList&&!w.contains(t,this.cmtList)&&this.cmtList.refresh(),this.cmtAcceptList&&!w.contains(t,this.cmtAcceptList)&&this.cmtAcceptList.refresh(1),this.cmtWonderfulList&&!w.contains(t,this.cmtWonderfulList)&&this.cmtWonderfulList.refresh(1)},valCmtOrder:function(t){if(0===arguments.length)return"1"},fixCmtItem:function(t,e){var i=y(t.$el),n=t.data||{};e.reward&&n.isAccepted&&i.find("span.answer-time").append('<span style="margin-left:5px;">已获得'+e.reward+"牛币</span>");var o=i.find(".js-cmt-action-share"),a=r.a.show({logType:"3",target:o,btn:["feed","img"],shareType:"2",entityId:n.id,feedType:"forward",feedData:{type:3,circle:-1,sourceId:n.id,sourceType:2,commentContent:n.content,ownerView:{ownerType:0,user:{userId:n.authorId,nickname:n.authorName}}}});t.$ncPushChild(a)},createDv:function(t){var e=document.createElement("div");return t.append(e),e}});var L=S;var $=i(2),D=i(0),P=i(3),A=i(27),R=i(150),U=i(400),M=P.create(),N=M;P.mix(M,s,null,{render:function(){this.initContent(),this.initImage(),this.initVote(),this.initFlash(),this.initHref(),this.initMathJax()},initContent:function(){var t=this.getContentDv();t.find("script").remove();var e=t.html();/<.*?>/.test(e)||(e=e.replace(/^\n+/g,"").replace(/\n+$/g,"").replace(/\n+/g,"<br /><br />"),t.html(e))},initImage:function(){this.getContentDv().addClass("js-nc-pop-image")},initVote:function(){var t=this.getContentDv();D.forEach(t.find("img[data-vote-id]"),(function(t){t=$(t);var e=$.trim(t.attr("data-vote-id"));!e&&t.remove(),e&&new U({renderTo:t,renderBy:"replaceWith",voteId:e})}))},initFlash:function(){if(A.flash())return;var t=this.getContentDv().find("embed"),e=$('<div style="position:absolute;left:0;top:0;width:100%"><div style="font-size:14px;text-align:center;color:#fff;padding:10px;overflow:hidden;background:#1c1c1c;">您的浏览器未启用 flash ，请<a class="link-green" href="https://get.adobe.com/cn/flashplayer/" target="_blank">安装</a>或者<a class="link-green" href="https://www.nowcoder.com/discuss/161012" target="_blank">启用 flash</a>（设置完成后，请重启浏览器）</div></div>');D.forEach(t,(function(t){var i=(t=$(t)).closest("object"),n=$('<div style="position:relative"></div>');(t=i.length>0?i:t).after(n),n.append(t).append(e.get(0).cloneNode(!0))}))},initHref:function(){var t=this.getContentDv().find("a");window.setTimeout((function(){D.forEach(t,(function(t){var e=(t=$(t)).attr("href");e&&-1!==e.indexOf("http")&&-1===e.indexOf("nowcoder.com")&&t.attr("target","_blank")}))}),1e3)},initMathJax:function(){var t=this.getContentDv();R.image(t),R.form(t)}});var F=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},q=i(2),H=i(3),O=H.create(),z=O;H.mix(O,s,null,{render:function(){this.shareBtn=q(".js-share-oprt-item"),this.tipsDv=q(".js-share-tooltip"),this.initShare()},initShare:function(){var t=this.data.post,e=t===undefined?{}:t,i=this.getContentDv(),n="「"+q(".js-post-title").text()+"」 "+(s=i.text(),(s||"").replace(/\r|\n/g,"").replace(/\s+/g," ")),o=n.length>100?n.substring(0,100)+"...":n,a={logType:"1",entityId:this.data.post.id,target:this.shareBtn,btn:["feed","wx","qq","weibo","link"],desc:o,link:window.location.href,feedType:"forward",feedData:{type:1,circle:-1,sourceId:e.id,sourceType:e.entityType,ownerView:{ownerType:0,user:{userId:e.authorId}}}};var s;r.a.show(F({},a,{target:this.shareBtn}))}});var W=i(35),B=i(5),G=i.n(B),V=i(31),J=i.n(V),Q=i(97),K=i.n(Q),X=i(2),Y=i(0),Z=i(3),tt=i(6),et=i(8),it=i(10),nt=i(12),ot=i(4),at=Z.create(),st=at;Z.mix(at,tt,{_template:'<div><div style="padding:20px;text-align:center;font-size:14px;">加载中...</div></div>',listeners:[{name:"render",type:"custom",handler:function(){var t=this;t.fetchRecommend({force:!0,call:function(){t.initContainer(),t.initEl(),t.initIpt(),t.renderRecommend(),t.popup.fixPosition()}})}},{name:"click .js-invite",handler:function(t){var e=X(t.currentTarget),i=this.invitedMap,n=this.getLineId(e);n&&!i[n]&&J.a.invitedUser({body:{postId:this.postId,invitedId:n},call:function(){i[n]=!0,e.replaceWith('<a href="javascript:void(0);" class="pop-invited-icon">已邀请</a>')},error:function(t){ot.alert(t.msg)}})}},{name:"click .js-refresh a",handler:function(){var t=this;t.fetchRecommend({force:!0,call:function(){t.renderRecommend()}})}}],show:function(t){var e=new at(t=t||{});return ot.wrap(e,{title:"邀请牛油帮忙回答",content:e.html(),width:640,okTxt:"关闭"}),e}},{initialize:function(t){this.timeout=nt.timeout(500),this.postId=t.postId,this.recommend=null,this.cache={},this.invitedMap={}},initContainer:function(){this.getEl().html(['<div class="pop-invite">','<div class="search-input-wrap">','<label class="ico-search"></label>','<input type="text" class="js-search-ipt" placeholder="搜索你想邀请的人">',"</div>",'<div class="js-none" style="padding:20px;text-align:center;font-size:14px;display:none;">没有数据</div>','<div class="js-refresh" style="text-align:right;font-size:12px;padding: 20px 20px 0;"><a href="javascript:void(0)" class="link-green"><i class="icon-refresh"></i> 换一批</a></div>','<ul class="pop-invite-list js-list"></ul>',"</div>"].join(""))},initEl:function(){var t=this.getEl();this.ipt=t.find(".js-search-ipt"),this.listEl=t.find(".js-list"),this.noneEl=t.find(".js-none"),this.refreshEl=t.find(".js-refresh")},initIpt:function(){var t=this,e=t.ipt;et.bindChange(e,(function(){t.timeout((function(){var i=X.trim(e.val());i?t.fetchList(i):t.renderRecommend()}))}))},renderRecommend:function(){this.renderList({items:this.recommend,isRecommend:!0})},renderList:function(t){var e=this.invitedMap,i=t.items,n=!!t.isRecommend;if(0===(i=i||[]).length)return this.listEl.html(""),this.refreshEl.hide(),void(!n&&this.noneEl.show());var o=Y.map(i,(function(t){var i=Y.id(t.id),n=+t.commentCount||0;return it.execTpl(['<li class="clearfix" data-id="#{uid}">','<a class="head-pic js-nc-card" data-card-uid="#{uid}" href="/profile/#{uid}" target="_blank"><img alt="头像" src="#{headerUrl}"></a>','<div class="pop-invite-info">','<span class="nker-name-box">','<a class="user-name level-color-#{honorLevel} js-nc-card" data-card-uid="#{uid}" href="/profile/#{uid}" target="_blank">#{nickname}</a>',"#{identity}","</span>",'<p class="pop-invite-brief">回答#{commentCount}次</p>',"</div>",e[i]?'<a href="javascript:void(0);" class="pop-invited-icon">已邀请</a>':'<a href="javascript:void(0);" class="pop-invite-icon js-invite">邀请TA</a>',"</li>"].join(""),{uid:i,nickname:t.nickname,headerUrl:t.head,commentCount:n,honorLevel:t.honorLevel,identity:Y.map(t.identities,(function(t){return'<img class="'+t.idenClass+'" src="//static.nowcoder.com/nc/image/identity/'+t.level+'.png" title="'+t.name+'"><span class="user-name">'+t.name+"</span>"})).join(" ")})})).join("");this.listEl.html(o).show(),this.noneEl.hide(),this.refreshEl[n?"show":"hide"]()},fetchRecommend:function(t){var e=this,i=!!t.force,n=t.call,o=e.invitedMap;if(!i&&e.recommend)return n&&n(e.recommend);J.a.getUserRecommend({query:{postId:e.postId},call:function(t){var i=t.data||{};e.recommend=i.data,Y.forEach(i.invitedIds,(function(t){o[t]=!0}))},always:function(){e.recommend=Y.map(e.recommend||[],(function(t){return{commentCount:t.comment_count,head:t.largeHeaderUrl,id:t.id,identities:t.identities,honorLevel:t.honor_level,nickname:t.nickname}})),n&&n(e.recommend)}})},fetchList:function(t){var e=this,i=e.cache,n=e.ipt;if(t=X.trim(t),i[t])return e.renderList({items:i[t]});K.a.queryUsers({body:{o:0,c:10,query:t},call:function(o){var a=o.data||[];i[t]=a,t===X.trim(n.val())&&e.renderList({items:a})},error:function(t){e.renderList({items:[]})}})},getLineId:function(t){var e=X(t).closest("li");return X.trim(e.attr("data-id"))}});var rt=i(2),ct=i(0),lt=i(3),dt=i(18),ut=i(8),pt=i(37),ft=i(4),ht=i(110),mt=i(118),vt=i(25),gt=i(14),yt=lt.create(),wt=yt;lt.mix(yt,s,null,{render:function(){this.doc=rt(document),this.initSetting(),this.initInviteAnswer(),this.initSink(),this.initHot(),this.initUnwaring(),this.initHidden(),this.initCertify(),this.initGild(),this.initTop(),this.initDel(),this.initEdit(),this.initReply(),this.initLike(),this.initFollow(),this.initNote(),this.initSpam(),this.initAllSpam(),this.initTagFocus(),this.initToggleGuide()},initSetting:function(){var t=rt(".js-post-setting");if(!t.get(0))return;var e=this.data.post,i=!!e.commentDisable,n=new ht({target:t,attach:{center:!0},clickToHide:!0,content:'\n        <div class="tooltip-arrow" style="left:50%;"><i></i></div>\n        <div class="tooltip-inner publish-link-box error">\n            <ul class="fold-menu-list" style="border:none;">\n                <li class="js-disable-cmt"><label class="radio">'+(i?"允许任何人评论":"关闭评论")+"</li>\n            </ul>\n        </div>\n        "}),o=n.getEl();o.addClass("tooltip bottom tooltip-info setting-tooltip"),o.on("click",".js-disable-cmt",(function(t){n.forceHide(),J.a.disableCmt({body:{postId:e.id,disable:i?"false":"true"},call:function(){return ft.tips("设置成功",(function(){return window.location.reload()}))},error:function(t){return ft.alert(t.msg)}})}))},initInviteAnswer:function(){var t=this.data.post;vt.click({cls:".js-post-invite-answer",call:function(){st.show({postId:t.id})}})},initSink:function(){var t=this.data.post;vt.click({cls:".js-post-sink",call:function(e,i){var n=i.attr("data-action");({sink:1,unsink:1})[n]&&!dt.mark(i)&&J.a[n]({body:{postId:t.id},call:function(){i.attr("data-action","sink"==n?"unsink":"sink"),i.html("sink"===n?"取消下沉":"下沉")},error:function(t){return ft.alert(t.msg)},always:function(){return dt.pause(i)}})}})},initHot:function(){var t=this.data.post;vt.click({cls:".js-post-hot",call:function(e,i){if(!dt.mark(i)){var n=i.attr("data-action");J.a[n]({body:{postId:t.id},call:function(t){i.attr("data-action","hot"===n?"unhot":"hot"),i.html("hot"===n?"取消烫":"加烫")},error:function(t){return ft.alert(t.msg)},always:function(){return dt.pause(i)}})}}})},initUnwaring:function(){var t=this.data.post;vt.click({cls:".js-post-unwaring",call:function(e,i){dt.mark(i)||J.a.unWarningPost({body:{postId:t.id},call:function(){return window.location.reload()},error:function(t){return ft.alert(t.msg)},always:function(){return dt.pause(i)}})}})},initHidden:function(){var t=this.data.post;vt.click({cls:".js-post-hidden",call:function(e,i){if(!dt.mark(i)){var n=i.attr("data-action");J.a[n]({body:{postId:t.id},call:function(t){i.attr("data-action","hidden"===n?"unhidden":"hidden"),i.html("hidden"===n?"取消隐藏":"隐藏")},error:function(t){return ft.alert(t.msg)},always:function(){return dt.pause(i)}})}}})},initCertify:function(){var t=this.data.post;function e(e,i,n){var o=n.attr("data-action");if(e.action[o]&&!dt.mark(n)){var a=e.action[o]||"0";J.a.updateCertify({body:{postId:t.id,certify:a},call:function(){rt(".js-post-certify").attr("data-action","certify").html("认证"),rt(".js-post-uncertify").attr("data-action","uncertify").html("未认证"),e.certify?(n.attr("data-action","dis-certify"==o?"certify":"dis-certify"),n.html("dis-certify"===o?"认证":"取消认证")):(n.attr("data-action","dis-uncertify"==o?"uncertify":"dis-uncertify"),n.html("dis-uncertify"===o?"未认证":"取消未认证"))},error:function(t){return ft.alert(t.msg)},always:function(){return dt.pause(n)}})}}vt.click({cls:".js-post-certify",call:ct.bind(e,null,{certify:!0,action:{certify:"1","dis-certify":"0"}})}),vt.click({cls:".js-post-uncertify",call:ct.bind(e,null,{certify:!1,action:{uncertify:"2","dis-uncertify":"0"}})})},initGild:function(){var t=this.data.post;vt.click({cls:".js-post-gild",call:function(e,i){var n=i.attr("data-action");({gild:1,ungild:1})[n]&&!dt.mark(i)&&J.a[n]({body:{postId:t.id},call:function(){i.attr("data-action","gild"==n?"ungild":"gild"),i.html("加精"==i.text()?"取消加精":"加精")},error:function(t){return ft.alert(t.msg)},always:function(){return dt.pause(i)}})}})},initTop:function(){var t=this.data.post;vt.click({cls:".js-post-top",call:function(e,i){var n=i.attr("data-action");if({top:1,untop:1}[n]&&!dt.mark(i)){var o="0"!==i.attr("data-all");J.a[n]({body:{postId:t.id,isTopAll:o},call:function(){var t="top"===n;i.attr("data-action",t?"untop":"top"),i.html(o?t?"取消全站置顶":"全站置顶":t?"取消置顶":"置顶")},error:function(t){return ft.alert(t.msg)},always:function(){return dt.pause(i)}})}}})},initDel:function(){var t=this,e=t.data.post,i=t.data.isAdmin,n=e.isGilded;function o(t,i){ft.confirm(t,(function(){J.a.deletePost({body:{id:e.id},call:function(){return ft.tips("操作成功",(function(){return window.location.href="/discuss"}))},error:function(t){return ft.alert(t.msg)},always:function(){return dt.pause(i)}})}),(function(){dt.clear(i)}))}vt.click({cls:".js-post-del",call:function(e,a){dt.mark(a)||(i&&o("删除后这篇帖子将无法恢复，是否确定删除？",a),!i&&n&&function(e){ft.confirm("此帖已被设为精华供网友膜拜，还请手下留情！如果心意已决，请联系管理员删除。",(function(){t.sendMsg("请求删除帖子"),dt.clear(e)}),(function(){dt.clear(e)}))}(a),!i&&!n&&o("辛苦码字，删了就没啦，真的要删吗？",a))}})},initEdit:function(){var t=this.data,e=t.post;function i(t){if(e.jobId)if(e.editJobUrl){var i=ft.confirm("该帖子由系统根据你发布的职位信息自动创建，你可以通过编辑该职位的相关描述，修改相应的内容。",(function(){return window.location.href=e.editJobUrl}));i.okBtn.html("前往编辑"),i.cancelBtn.html("暂不编辑")}else ft.alert("该帖子由系统根据发布的职位信息自动创建，暂时无法编辑");else t&&(window.location.href=t)}vt.click({cls:".js-post-edit",call:function(n){n.preventDefault();var o=rt(n.currentTarget),a=rt.trim(o.attr("href"));e.isGilded&&!t.isAdmin?ft.confirm("编辑后，加精状态会暂时取消，需要管理员审核，是否继续？",(function(){return i(a)})):i(a)}})},initReply:function(){var t=rt("div.feed-publish-area").closest("div.module-box");vt.click({cls:".js-post-replay",needLogin:!0,call:function(t){pt.fire("POST_TERMINAL_GO_CMT_INPUT")}}),pt.listen("POST_TERMINAL_GO_CMT_INPUT",(function(){ut.scrollToEl({el:t,animation:!0,ext:-rt("div.nowcoder-header").height()-10}),ut.highLight({el:t})}))},initLike:function(){var t=this.data.post;function e(e,i){dt.mark(i)||G.a[t.isLiked?"unlike":"like"]({body:{id:t.id,type:t.entityType},call:function(e){var i=e.count||0;ct.forEach(rt(".js-post-like"),(function(e){var n=(e=rt(e)).text().replace(t.isLiked?"已赞":"赞",t.isLiked?"赞":"已赞").replace(/\d+/,i);e.html(n)}));var n=rt(".js-fix-like");n[t.isLiked?"removeClass":"addClass"]("link-green"),n.find("span").html(i),t.isLiked=!t.isLiked},error:function(t){return ft.alert(t.msg)},always:function(){return dt.pause(i)}})}vt.click({cls:".js-post-like",needLogin:!0,call:e}),vt.click({cls:".js-fix-like",needLogin:!0,call:e})},initFollow:function(){var t=this.data.post,e=rt(".js-click-follow, .js-click-unfollow"),i=rt(".js-post-follow, .js-post-unfollow"),n=rt(".js-fix-follow, .js-fix-unfollow"),o=W.a.follow({entityId:t.id,entityType:t.entityType,followCls:"js-click-follow",unfollowCls:"js-click-unfollow",followCount:t.followTotal,followCb:ct.bind(r,null,!1)}),a=W.a.follow({entityId:t.id,entityType:t.entityType,followCls:"js-post-follow",unfollowCls:"js-post-unfollow",followCount:t.followTotal,followCb:ct.bind(r,null,!1),renderResult:function(t,e,i,n){t.html(n+" "+i)}}),s=W.a.follow({entityId:t.id,entityType:t.entityType,followCls:"js-fix-follow",unfollowCls:"js-fix-unfollow",noHover:!0,followCount:t.followTotal,followCb:ct.bind(r,null,!0),renderResult:function(t,e,i,n){t.html('<i class="icon-star"></i><span>'+i+"</span>")}});function r(t,r,c){"cancel"===r?(e.removeClass("js-click-unfollow").addClass("js-click-follow"),i.removeClass("js-post-unfollow").addClass("js-post-follow"),n.removeClass("js-fix-unfollow link-green").addClass("js-fix-follow")):"new"!==r&&"edit"!==r||(e.removeClass("js-click-follow").addClass("js-click-unfollow"),i.removeClass("js-post-follow").addClass("js-post-unfollow"),n.removeClass("js-fix-follow").addClass("js-fix-unfollow link-green")),"edit"!==r&&(o.update(c),a.update(c),s.update(c))}},initNote:function(){vt.click({cls:".js-post-note",needLogin:!0,call:function(){new ft({title:"鼠标划线采集",width:776,content:['<div class="pop-note-tips">','<div class="pop-note-picbox">','<div class="pop-note-pic" style="display:block;"><img style="display:block;width:736px;height:530px;" src="https://uploadfiles.nowcoder.com/images/20190404/56_1554361781890_3F9F94655A7CC6C63744ADEFE6CA0CE2"></div>',"</div>",'<div class="submit-btnbox"><a href="javascript:void(0);" class="btn btn-primary js-close-popup">我知道了</a></div>',"</div>"].join(""),noFooter:!0})}})},initSpam:function(){var t=this.data.post;vt.click({cls:".js-post-spam",call:function(e,i){if(!dt.mark(i)){var n=i.attr("data-action");J.a[n]({body:{pid:t.id},call:function(){return window.location.reload()},error:function(t){return ft.alert(t.msg)},always:function(){return dt.pause(i)}})}}})},initAllSpam:function(){var t=this.data.post;vt.click({cls:".js-post-all-spam",call:function(e,i){if(!dt.mark(i)){var n=i.attr("data-action");ft.confirm("确定将这个用户的所有帖子标记为垃圾贴，并拉黑TA吗？",(function(){J.a[n]({body:{uid:t.authorId,type:1},call:function(){return window.location.reload()},error:function(t){return ft.alert(t.msg)},always:function(){return dt.pause(i)}})})),dt.pause(i)}}})},initTagFocus:function(){ct.forEach(rt(".js-tag-item"),(function(t){var e=(t=rt(t)).find(".discuss-tag-item"),i=rt.trim(t.attr("data-tag-id")),n=0===t.find(".js-follow").length,o=!1,a=0;i&&(t.on("mouseenter",(function(){o||(o=!0,J.a.getTagNumInfo({query:{id:i},call:function(e){var i=e.data;a=+i.followedCount||0,t.append('\n                    <div class="tooltip bottom tooltip-info">\n                        <div class="tooltip-arrow"><i></i></div>\n                        <div class="tooltip-inner tag-tip-box">\n                            <span class="item">'+i.postCount+" 讨论</span>\n                            "+(i.postGildCount>0?'<span class="item">'+i.postGildCount+" 精华</span>":"")+'\n                            <span class="item"><span class="js-follow-count">'+a+'</span> 关注</span>\n                            <a href="javascript:void(0);" class="btn '+(n?"btn-default":"btn-primary")+' btn-xxs js-follow">'+(n?"已关注":"+ 关注")+"</a>\n                        </div>\n                    </div>"),t.unbind("mouseenter")},always:function(){return o=!1}}))})),t.on("click",".js-follow",(function(o){G.a[n?"unfollow":"follow"]({body:{id:i,type:gt.type.topic},call:function(i){n=!n,a=Math.max(0,a+(n?1:-1)),t[n?"addClass":"removeClass"]("selected"),e.find(".js-follow").remove(),!n&&e.prepend('<a href="javascript:void(0);" class="nc-req-auth js-follow"><i class="icon-plus-sign"></i></a>'),t.find(".js-follow-count").html(a),t.find(".tooltip .js-follow").html(n?"已关注":"+ 关注").removeClass("btn-default btn-primary").addClass(n?"btn-default":"btn-primary")},error:function(t){return ft.alert(t.msg)}})})))}))},initToggleGuide:function(){var t=this;if(!t.data.isAdmin)return;rt("#jsEnableGuide").on("click",(function(e){var i=1===rt(e.currentTarget).data("guide");J.a[i?"closeSubjectGuide":"openSubjectGuide"]({body:{postId:t.data.post.id},call:function(){window.location.reload()},error:function(t){var e=t.msg;ft.alert(e)}})}))},sendMsg:function(t){mt.show({title:"发私信",content:(t?t+"\n":"")+window.location.href,receiver:{name:"牛妹",id:826546},sentCb:function(){return window.location.reload()}})}});var bt=i(75),Ct=i.n(bt),kt=i(125),xt=i(2),_t=i(12),jt=i(203),Tt=i(4);var It={components:{Status:kt.a},data:function(){return{isLoading:!0,isOpenBlog:!1,error:"",newestList:[],items:[],keyword:""}},mounted:function(){var t=this;t.initData((function(){t.initSearch()}))},methods:{popup:function(){Tt.wrap(this,{title:"采集到博客",width:640,hasNoFooter:!0})},initData:function(t){var e=this;Ct.a.newestBlog({type:"GET",call:function(i){var n=i.data,o=e.isOpenBlog=!!n.hasBlog;e.newestList=e.items=n.blogs||[],o&&t&&t()},error:function(t){e.error=t.msg},always:function(){e.isLoading=!1,e.$nextTick((function(){e.popup.fixPosition()}))}})},initSearch:function(){var t=this,e=_t.frequency(250),i={};function n(){var e=xt.trim(t.keyword),n=e?i[e]:t.newestList;n?t.items=n:Ct.a.searchBlog({query:{query:e},call:function(n){i[e]=n.data,xt.trim(t.keyword),t.items=n.data},error:function(i){e===xt.trim(t.keyword)&&(t.items=[])}})}t.$watch("keyword",(function(){e(n)}))},actionOpenBlog:function(){jt.show({getReturnUrl:function(t){return"https://blog.nowcoder.net/detail/0?isCollect=true"}})}},computed:{isInSearch:function(){return!!xt.trim(this.keyword)}}},Et=i(1),St=Object(Et.a)(It,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"pop-content"},[t.isLoading?i("Status",{attrs:{loading:!0}}):t.error?i("Status",[t._v(t._s(t.error))]):i("div",{staticClass:"pop-note"},[i("div",{staticClass:"pop-note-search"},[i("div",{staticClass:"search-input-wrap"},[i("label",{staticClass:"ico-search"}),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],ref:"input",attrs:{type:"text",placeholder:"请输入标题进行搜索"},domProps:{value:t.keyword},on:{input:function(e){e.target.composing||(t.keyword=e.target.value)}}})])]),t._v(" "),i("dl",[i("dt",[t._v(t._s(t.isInSearch?"搜索结果":"最近更新的文章"))]),t._v(" "),i("dd",[0===t.items.length?i("p",{staticStyle:{"text-align":"center"}},[t._v("采集的内容将保存至你的博客中，你可对文章可见范围进行设置。")]):t._l(t.items,(function(e,n){return i("p",{key:n},[i("a",{staticClass:"js-close-popup",staticStyle:{display:"block"},attrs:{href:"https://blog.nowcoder.net/detail/"+e.uuid+"?isCollect=true"}},[t._v(t._s(e.title||"未命名笔记"))])])}))],2)]),t._v(" "),t.isOpenBlog?i("a",{staticClass:"btn btn-primary btn-auto",attrs:{href:"https://blog.nowcoder.net/detail/0?isCollect=true"}},[t._v("+采集到新文章")]):i("a",{staticClass:"btn btn-primary btn-auto js-close-popup",attrs:{href:"javascript:void(0);"},on:{click:t.actionOpenBlog}},[t._v("+开通博客新增文章")])])],1)}),[],!1,null,null,null).exports,Lt=i(29),$t=i(2),Dt=i(0),Pt=i(3),At=i(10),Rt=i(4),Ut=i(204),Mt=i(25),Nt=Pt.create(),Ft=Nt;Pt.mix(Nt,s,null,{render:function(){var t=this.data.post||{};"2"===Dt.id(t.postType)&&Ut.isSupport&&(this.initTips(),this.initSelect())},initTips:function(){var t=this,e=t.tipsDv=$t('<div class="tooltip bottom nc-req-auth" style="cursor:pointer;width:120px;position:absolute;z-index:9999;display:none;"><div class="tooltip-arrow" style="left:50%;"></div><div class="tooltip-inner">精华采集</div></div>');$t(document.body).append(e),Mt.click({el:e,needLogin:!0,click:function(){e.hide()},call:function(){var e=window.location.href,i="",n="";Dt.forEach(t.selection.val().split("\n"),(function(t){(t=$t.trim(t))&&(i+="<div>"+At.encodeHTML(t)+"</div>"),t&&(n+=t+"\n")}));var o={md:"> ["+n+"]("+e+")",html:["<blockquote>",'<div class="notes-about-mod notes-blue-mod"><a href="',e,'" target="_blank">',i,"</a></div>","</blockquote>"].join("")};Ct.a.postCollect({body:{content:JSON.stringify(o)},call:function(t){(new(Lt.extend(St))).popup()},error:function(t){Rt.alert(t.msg)}})}})},initSelect:function(){var t=this;t.selection=new Ut({el:t.getContentDv(),call:function(e){var i=e.x-60,n=e.y;t.tipsDv.css("left",i).css("top",n).show()},canCancel:function(e){return!$t.contains(t.tipsDv.get(0),e.get(0))},cancel:function(){t.tipsDv.hide()}})}});var qt=i(155),Ht=i.n(qt),Ot=i(2),zt=i(29),Wt=i(4),Bt=i(51);var Gt={ncPopup:function(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},e=this,i=zt.extend(e),n=new i(t);return Wt.wrap(n,{title:"添加话题",hasNoFooter:!0,close:function(){n.actionBlur()}}),n},mounted:function(){Bt.input(Ot(this.$refs.input))},props:["entityId","entityType"],data:function(){return{content:""}},methods:{actionBlur:function(){Ot(this.$refs.input).blur()},actionAddSubject:function(){var t=this,e=t.content,i=t.entityId,n=t.entityType;Ht.a.createSubject({body:{content:e,entityId:i,entityType:n},call:function(e){var n=e.data,o=n===undefined?[]:n;t.$emit("success",o),t.popup.close(),J.a.openSubjectGuide({body:{postId:i},call:function(){window.location.reload()},error:function(t){var e=t.msg;Wt.alert(e)}})},error:function(t){var e=t.msg;Wt.alert(e)}})}}},Vt=Object(Et.a)(Gt,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"pop-content"},[i("div",{staticClass:"pop-input-wrap"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],ref:"input",attrs:{type:"text",value:"",placeholder:"输入话题名称",maxlength:"40"},domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value)}}})]),t._v(" "),i("div",{staticClass:"pop-collect-tag"},[i("a",{staticClass:"btn btn-primary",attrs:{href:"javascript:void(0)"},on:{click:t.actionAddSubject}},[t._v("确定")])])])}),[],!1,null,null,null).exports,Jt=i(59),Qt=i(2),Kt=i(11),Xt=i(0),Yt=i(37),Zt=i(4),te=i(20),ee=i(110);Kt.ready({initialize:function(){Xt.copy(this,window,["post","comment","pageInfo"]),this.comment.draft=(this.comment.draft||{}).content||"",this.globalInfo=Xt.clone(window.globalInfo),this.initModule(),this.initRelatedPost(),Jt.use("ncPlugin/highlighter/highlighter",(function(t){return t.init()})),this.initSubject()},initModule:function(){var t=this,e=te.getNavHeight(),i=!!t.globalInfo.ownerId,n=!!t.post.isAdmin;Xt.forEach([m,L,N,z,wt,Ft],(function(o){new o({user:t.globalInfo,post:t.post,comment:t.comment,navHeight:e,info:t.pageInfo,isLogin:!!i,isAdmin:!!n})}))},initRelatedPost:function(){var t=Qt(".js-related-post");if(!t.length)return;var e=te.getNavHeight(),i=e-t.outerHeight(),n=t.nextAll(".module-box");Xt.forEach(n,(function(t){i-=Qt(t).outerHeight()}));var o={target:t,fixCls:"fixed-sidebar",redress:i};te.fixEl(o),Yt.listen("titleFixed",(function(n){var a=n.outerHeight();o.redress=i+a,t.css("top",e+a+"px")})),Yt.listen("titleCancelFixed",(function(n){o.redress=i,t.css("top",e+"px")}))},initSubject:function(){var t=this;if(!t.post.isAdmin)return;Qt.each(Qt(".topic-wrapper a"),(function(e,i){!function(e){var i=new ee({target:e,attach:{center:!0},clickToHide:!0,content:'\n            <div class="tooltip-arrow" style="left:50%;"><i></i></div>\n            <div class="tooltip-inner publish-link-box error">\n                <ul class="fold-menu-list" style="border:none;">\n                    <li class="js-delete-tag"><label class="radio">删除标签</li>\n                </ul>\n            </div>\n            '}),n=i.getEl();n.addClass("tooltip bottom tooltip-info setting-tooltip"),n.on("click",".js-delete-tag",(function(n){i.forceHide(),Ht.a.deleteSubjectRelation({body:{entityId:t.post.id,entityType:t.post.entityType,subjectId:Qt(e).data("id")},call:function(){Qt(e).remove()},error:function(t){var e=t.msg;Zt.alert(e)}})}))}(i)})),Qt("#jsAddSubject").on("click",(function(){Vt.ncPopup({propsData:{entityId:t.post.id,entityType:t.post.entityType}})}))}})},73:function(t,e,i){i(2);var n=i(6),o=i(18),a=i(3),s=i(0),r=i(4),c=i(57),l=i(28),d=i(14),u=(i(24),t.exports=a.create());a.mix(u,n,{_template:['<div class="review-comment pop-review-comment">',"<h4>举报类型</h4>",'<div class="review-class-wrap">#{reportTypeOption}</div>','<div class="pop-tip">举报说明</div>','<textarea class="pop-area"></textarea>',"</div>"].join(""),listeners:[{name:"render",type:"custom",handler:function(){var t=this.getEl();this.violationTypeCheckBox=c.mix({el:t.find("div.review-class-wrap label.radio")}),this.violationInfoTextArea=t.find("textarea")}}],show:function(t){t=t||{};l.isReported({body:{type:t.type,entityId:t.entityId},call:function(e){e.data?r.ok('举报我们已经收到，根据<a class="link-green" href="/discuss/91947">《牛客讨论区版规》</a>，您的举报将由管理员审核判定后进行处理。'):function(t){var e=new u(t);r.wrap(e,{title:"举报",content:e.html(),width:560,okTxt:"提交",ok:function(){var i=e,n=i.violationTypeCheckBox.val()||"";if(""===n)return r.alert("请输入举报类型",2e3),!0;var a=i.violationInfoTextArea.val()||"";if("其他"===n&&""===a)return r.alert("请输入举报说明",2e3),!0;var s=e.getEl();o.mark(s)||l.addReport({body:{type:t.type,entityId:t.entityId,mainCommentEntryId:t.mainCommentEntryId||0,violationType:n,violationInfo:a,uuid:t.uuid},call:function(t){r.ok('举报我们已经收到，根据<a class="link-green" href="/discuss/91947">《牛客讨论区版规》</a>，您的举报将由管理员审核判定后进行处理。')},error:function(e){var i;2===e.code?r.ok("您已经举报过该"+((i=t.type)===d.type.user?"用户":i===d.type.post?"帖子":"评论")+"，请耐心等待管理员处理。"):r.alert(e.msg)},always:function(){o.clear(s)}})},cancel:function(){}})}(t)},error:function(t){r.alert(t.msg)}})}},{_getData:function(t){var e=s.id(t.type)===s.id(d.type.user)?["垃圾营销","传播色情/低俗内容","传播违法信息","抄袭或涉嫌侵权","其他"]:["广告及垃圾信息","抄袭或涉嫌侵权","不友善/色情/低俗内容","政治敏感","其他"],i="";return s.forEach(e,(function(t,e){i+=['<label class="radio">','<span class="icons"></span>','<input type="radio" data-toggle="radio" value="',t,'">',t,"</label>"].join("")})),{reportTypeOption:i}}})},74:function(t,e,i){"use strict";var n=i(2),o=i.n(n),a=i(19),s=i.n(a);var r={name:"nc-pager",props:{total:{"default":1},interval:{"default":8},url:String,value:Number,pageQuery:String,noExt:{"default":!1}},data:function(){var t=+this.value,e=+this.total;return{current:t>0&&t<=e?t:1}},methods:{pageUrl:function(t){var e=o.a.trim(this.url),i=o.a.trim(this.pageQuery);if(!e||!i)return"javascript:void(0);";var n={};return n[i]=t,s.a.addParam(n,e)},jump2page:function(t,e){var i=this.total;(t=(t=+t||1)>=i?i:t<=1?1:t)!==this.current&&(this.current=t,!e&&this.$emit("change",this.current))}},watch:{current:function(t){this.$emit("input",t)},value:function(t){var e=+this.total;this.current=t>0&&t<=e?t:1},total:function(t){this.current>t&&(this.current=Math.max(t,1))}},computed:{prev:function(){return Math.max(this.current-1,1)},next:function(){return Math.min(this.current+1,+this.total||0)},first:function(){var t=this.current,e=this.total,i=this.interval,n=t<=i/2?1:t-Math.floor(i/2);n+i-1>e&&(n=e>i?e-i+1:1);return n},last:function(){var t=this.first+this.interval-1;return t>this.total?this.total:t},range:function(){for(var t=[],e=this.first,i=this.last;e<=i;e++)t.push(e);return t}}},c=i(1),l=Object(c.a)(r,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.total>1?i("div",{staticClass:"pagination"},[i("ul",[t.noExt?[i("li",{"class":1===t.current?"active":""},[i("a",{attrs:{href:t.pageUrl(1)},on:{click:function(e){return t.jump2page(1)}}},[t._v("1")])]),t._v(" "),3===t.first?i("li",[i("a",{attrs:{href:t.pageUrl(2)},on:{click:function(e){return t.jump2page(2)}}},[t._v("2")])]):t._e(),t._v(" "),t.first>3?i("li",[i("a",{attrs:{href:"javascript:void(0);"}},[t._v("...")])]):t._e(),t._v(" "),t._l(t.range,(function(e){return 1!==e&&e!==t.total?i("li",{key:e,"class":e===t.current?"active":""},[i("a",{attrs:{href:t.pageUrl(e)},on:{click:function(i){return t.jump2page(e)}}},[t._v(t._s(e))])]):t._e()})),t._v(" "),t.last+2===t.total?i("li",[i("a",{attrs:{href:t.pageUrl(t.last+1)},on:{click:function(e){return t.jump2page(t.last+1)}}},[t._v(t._s(t.last+1))])]):t._e(),t._v(" "),t.last+2<t.total?i("li",[i("a",{attrs:{href:"javascript:void(0);"}},[t._v("...")])]):t._e(),t._v(" "),i("li",{"class":t.current===t.total?"active":""},[i("a",{attrs:{href:t.pageUrl(t.total)},on:{click:function(e){return t.jump2page(t.total)}}},[t._v(t._s(t.total))])])]:[i("li",{staticClass:"txt-pager","class":1===t.current?"disabled":""},[i("a",{attrs:{href:1===t.current?"javascript:void(0);":t.pageUrl(1)},on:{click:function(e){return t.jump2page(1)}}},[t._v("首页")])]),t._v(" "),i("li",{staticClass:"txt-pager","class":1===t.current?"disabled":""},[i("a",{attrs:{href:1===t.current?"javascript:void(0);":t.pageUrl(1)},on:{click:function(e){return t.jump2page(t.prev)}}},[t._v("上一页")])]),t._v(" "),t._l(t.range,(function(e){return i("li",{key:e,"class":e===t.current?"active":""},[i("a",{attrs:{href:t.pageUrl(e)},on:{click:function(i){return t.jump2page(e)}}},[t._v(t._s(e))])])})),t._v(" "),i("li",{staticClass:"txt-pager","class":t.current===t.total?"disabled":""},[i("a",{attrs:{href:t.current===t.total?"javascript:void(0);":t.pageUrl(t.total)},on:{click:function(e){return t.jump2page(t.next)}}},[t._v("下一页")])]),t._v(" "),i("li",{staticClass:"txt-pager","class":t.current===t.total?"disabled":""},[i("a",{attrs:{href:t.current===t.total?"javascript:void(0);":t.pageUrl(t.total)},on:{click:function(e){return t.jump2page(t.total)}}},[t._v("尾页")])])]],2)]):t._e()}),[],!1,null,null,null).exports;l.install=function(t){return t.component(l.name,l)};e.a=l},75:function(t,e,i){var n=i(7);t.exports={url:{listBlogAnswers:"/blog/answer/list",newestBlog:"/blog/newest",searchBlog:"/blog/query",postCollect:"/blog/postCollect",getBlogList:"/blog/blogs",getColumnList:"/blog/zhuanlans",markBlogSpam:"/admin/mark-blog-spam",deleteBlog:"/blog/del/#{uuid}"}},n.add(t.exports,t.exports.url)},76:function(t,e,i){"use strict";var n=i(5),o=i.n(n),a=i(33),s=i(2),r=i(0),c=i(3),l=i(8),d=i(4),u=i(20),p=i(55),f=c.create();function h(t,e){var i=this;i.flag[t]||(i.flag[t]=!0,r.isFunction(e)&&e((function(){i.flag[t]=!1})))}e.a=f,r.extend(f.prototype,{initialize:function(t){this.flag={},this.wrap=h,this.ctx=t.context},fixPosition:function(t){t=t||{};var e=this.ctx,i=s(window),n=u.getNavHeight(),o=s(t.el);o=o.get(0)?o:s(e.$el);var a=r.id(t.type)||"0",c=i.scrollTop(),d=p(o,a);function p(t,e){var o=l.getPosTop(t),a=i.scrollTop(),s=a+n,r=a+i.height();if("0"===e&&!(o>=s&&o<r))return!1;if("1"===e){var c=o+t.outerHeight();return!(c>=s&&c<r)}return!0}e.$nextTick((function(){p(o,a)||(d&&i.scrollTop(c),!d&&l.scrollToEl({el:o,ext:-1*(n+5)}))}))},like:function(t,e){this.wrap("like",(function(i){o.a[t?"like":"unlike"]({body:e.body,call:function(t){r.isFunction(e.call)&&e.call(t)},error:function(t){d.alert(t.msg)},always:i})}))},forward:function(t){var e=this;a.a.ncPopup({propsData:{data:t}}).$on("forward",(function(){return e.ctx.$emit("forward")}))},favorite:function(t,e){var i=this;function n(t,e,i){if(!t||i.length>0)return o.a[t?"createFollowTags":"editFollowTags"]({body:r.extend(e,{tags:i.join(",")}),call:function(){},error:function(t){d.alert(t.msg)}})}!t&&p.show({entityId:e.body.id,entityType:e.body.type,isEdit:!0,ok:r.bind(n,null,!1,e.body),cancel:function(){i.wrap("favorite",(function(t){o.a.unfollow({body:e.body,call:function(t){r.isFunction(e.call)&&e.call(t)},error:function(t){d.alert(t.msg)},always:t})}))},close:function(){}}),t&&i.wrap("favorite",(function(t){o.a.follow({body:e.body,call:function(t){r.isFunction(e.call)&&e.call(t),p.show({entityId:e.body.id,entityType:e.body.type,isEdit:!1,ok:r.bind(n,null,!0,e.body),cancel:function(){},close:function(){}})},error:function(t){d.alert(t.msg)},always:t})}))},checkFollow:function(t,e){o.a.isFollow({query:{entityId:t.entityId,entityType:t.entityType},call:function(t){e(t)}})}})},78:function(t,e,i){"use strict";var n=i(2),o=i(19);var a={props:["items"],inject:["feedUtil","config"],data:function(){return{width:0,leftDistance:0,cursor:"zoom-out",modeShowed:{normal:!0},indexShowed:{},indexLoaded:{},isDetail:!1,current:-1}},computed:{isSingle:function(){return 1===this.items.length},clsLength:function(){var t=this.items.length;return t%3==0||t>4?3:2},groupList:function(){for(var t=[],e=0,i=this.items.length;e<i;e+=this.clsLength)t.push(this.items.slice(e,e+this.clsLength));return t},listCls:function(){return this.isSingle?"two-col-img":"three-col-img"},inlineStyle:function(){var t=this.items[0];if(this.isSingle&&(t.width<275||t.height<275))return t.width<275&&t.height<275?{width:t.width+"px",height:t.height+"px"}:t.width<275&&t.height>=275?{width:275/t.height*t.width+"px",height:"275px"}:t.width>=275&&t.height<275?{width:"275px",height:275/t.width*t.height+"px"}:{};return{}}},methods:{clipStyle:function(t){var e={"object-fit":this.isSingle&&(t.width<275||t.height<275)?"scale-down":"cover"};return e["object-position"]=t.width>t.height?"center":"center top",e},srcPadding:function(t){var e=this.isSingle?"w_550,h_550":"w_360,h_360";return o.addParam({"x-oss-process":"image/resize,m_mfit,"+e},t.src)},checkLongImage:function(t){return t.height>550&&t.height>2*t.width&&(!this.isSingle||t.width>275)},getLoadingHeight:function(t){var e=t.width,i=t.height,o=n(this.$el).width();return e<=o?i:i/e*o},actionDispatch:function(t){var e=t.pageX-this.leftDistance;e<this.width/3&&this.actionPrev(),e>=this.width/3&&e<2*this.width/3&&this.actionClose(),e>=2*this.width/3&&this.actionNext()},actionOpen:function(t){this.isDetail=!0,this.current=t},actionClose:function(){this.isDetail=!1},actionPrev:function(){0===this.current?this.actionClose():this.current--},actionNext:function(){this.current+1===this.items.length?this.actionClose():this.current++},actionHover:function(t){var e=t.pageX-this.leftDistance;e<this.width/3&&(this.cursor=0===this.current?"zoom-out":"w-resize"),e>=this.width/3&&e<2*this.width/3&&(this.cursor="zoom-out"),e>=2*this.width/3&&(this.cursor=this.current+1===this.items.length?"zoom-out":"e-resize")},actionLoad:function(t){this.$set(this.indexLoaded,t,!0)}},watch:{isDetail:function(t){var e=this;e.modeShowed[t?"detail":"normal"]=!0,e.feedUtil.fixPosition&&e.feedUtil.fixPosition({el:e.$el}),e.$nextTick((function(){var t=n(e.$refs.imgContainer);e.leftDistance=t.offset().left,e.width=t.width()}))},current:function(t){this.$set(this.indexShowed,t,!0),this.$set(this.indexShowed,t+1,!0),this.feedUtil.fixPosition&&this.feedUtil.fixPosition({el:this.$el})}},mounted:function(){this.config.isPreview&&this.actionOpen(0)}},s=i(1),r=Object(s.a)(a,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return(t.items||[]).length>0?i("div",{staticClass:"col-img-box"},[t.modeShowed.detail?i("div",{directives:[{name:"show",rawName:"v-show",value:t.isDetail,expression:"isDetail"}]},[i("div",{ref:"imgContainer",staticClass:"col-img big-show-img",style:{cursor:t.cursor},on:{mousemove:t.actionHover,click:t.actionDispatch}},[t._l(t.items,(function(e,n){return[t.indexShowed[n]||n===t.current+1&&t.indexLoaded[t.current]?[i("img",{directives:[{name:"show",rawName:"v-show",value:n===t.current&&t.indexLoaded[n],expression:"index === current && indexLoaded[index]"}],key:n,attrs:{src:e.src,alt:e.alt},on:{load:function(e){return t.actionLoad(n)}}}),t._v(" "),t.indexLoaded[n]?t._e():i("div",{directives:[{name:"show",rawName:"v-show",value:n===t.current,expression:"index === current"}],key:n+t.items.length,staticClass:"col-img-loading",style:"height:"+t.getLoadingHeight(e)+"px"},[i("img",{attrs:{src:"//uploadfiles.nowcoder.com/images/20160415/56_1460702753117_F68B6B6E9DBC3FED9828888665D0AF32"}})])]:t._e()]}))],2),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isDetail&&t.items.length>1,expression:"isDetail && items.length > 1"}],staticClass:"thumbnail-img-box"},t._l(t.items,(function(e,n){return i("div",{key:n,staticClass:"col-img thumbnail-img","class":n===t.current?"selected":""},[i("img",{attrs:{src:t.srcPadding(e),alt:e.alt},on:{click:function(e){return t.actionOpen(n)}}})])})),0)]):t._e(),t._v(" "),t.modeShowed.normal?i("div",{directives:[{name:"show",rawName:"v-show",value:!t.isDetail,expression:"!isDetail"}]},t._l(t.groupList,(function(e,n){return i("div",{key:n},t._l(e,(function(e,o){return i("div",{key:o,staticClass:"col-img","class":t.listCls,staticStyle:{cursor:"zoom-in"},style:t.inlineStyle},[i("img",{style:t.clipStyle(e),attrs:{src:t.srcPadding(e),alt:e.alt,loading:"lazy"},on:{click:function(e){return t.actionOpen(n*t.clsLength+o)}}}),t._v(" "),t.checkLongImage(e)?i("span",{staticClass:"feed-img-tag"},[t._v("长图")]):"gif"===e.alt.split(".").pop().toLowerCase()?i("span",{staticClass:"feed-img-tag"},[t._v("GIF")]):t._e()])})),0)})),0):t._e()]):t._e()}),[],!1,null,null,null);e.a=r.exports},84:function(t,e,i){"use strict";i.r(e);var n=i(74),o=i(2),a=i(0),s=i(3),r=i(4),c=i(28),l=i(14),d=i(20),u=i(73),p=s.create(),f=p;function h(t,e,i){e=[e,t.id].join("_");var n=t._actionFlag=t._actionFlag||{};n[e]||(n[e]=!0,i&&i((function(){return window.setTimeout((function(){return n[e]=!1}),150)})))}a.extend(p.prototype,{initialize:function(t){this.root=t.root},del:function(t,e){var i=this;r.confirm("确定删除评论？",(function(){i.limit(t,"del",(function(i){c.cmtDel({body:{id:t.id},call:e,error:function(t){return r.alert(t.msg)},always:i})}))}))},like:function(t){this.limit(t,"like",(function(e){var i=t.isLiked;c[i?"unlike":"like"]({body:{id:t.id,type:l.type.comment},call:function(e){t.isLiked=!i,t.likes=e.count},error:function(t){return r.alert(t.msg)},always:e})}))},share:function(t){if(!this.root.isNoShareAction)return;d.shareImg({shareType:"2",entityId:t.id})},report:function(t){u.show({type:l.type.comment,entityId:t.id,mainCommentEntryId:(this.root||{}).id})},litigant:function(t){var e=this,i=t.isLitigant;r.confirm(i?"你确定将此评论取消当事人评论吗":"你确定要将评论设为当事人评论吗",(function(){e.limit(t,"litigant",(function(n){c[i?"cmtDelLitigant":"cmtAddLitigant"]({body:{commentId:t.id},call:function(){t.isLitigant=!i,e.emit("litigantCmt")},error:function(t){return r.alert(t.msg)},always:n})}))}))},wonderful:function(t){var e=this,i=t.isWonderful;r.confirm(i?"你确定将此评论取消精彩吗":"你确定要将评论设为精彩吗",(function(){e.limit(t,"wonderful",(function(n){c[i?"cmtDelWonderful":"cmtAddWonderful"]({body:{commentId:t.id},call:function(){t.isWonderful=!i,e.emit("wonderfulCmt")},error:function(t){return r.alert(t.msg)},always:n})}))}))},accept:function(t){var e=this;r.confirm("采纳本楼为最佳回答后，你悬赏的牛币将直接打入对方账户，你将无法撤销本操作，是否确定采纳？",(function(){var i=e.root||{};e.limit(t,"accept",(function(n){c.cmtAccept({body:{commentId:t.id,entityId:i.id,entityType:i.type},call:function(){t.isAccepted=!0,i.config.isAward=!1,e.emit("acceptCmt")},error:function(t){return r.alert(t.msg)},always:n})}))}))},spam:function(t,e){new r({title:"提示",content:['<div style="text-align:center;">','<a href="javascript:void(0);" class=" btn btn-primary btn-lg js-close-popup" data-type="1" style="margin-bottom:20px;">这条回帖是垃圾</a>','<a href="javascript:void(0);" class="btn btn-warn btn-lg js-close-popup">TA的回帖都是垃圾</a>',"</div>"].join("")}).getEl().on("click","a.btn-lg",(function(i){var n=o(i.currentTarget),a="1"===o.trim(n.attr("data-type"));r.confirm(a?"确定将这条评论标记为垃圾吗？":"确定将这个用户的所有评论标记为垃圾，并拉黑TA吗？",(function(){c[a?"cmtMarkSpam":"cmtMarkUserAllSpam"]({body:a?{cid:t.id}:{uid:t.authorId,type:2},call:e,error:function(t){return r.alert(t.msg)}})}))}))},emit:function(){var t=this,e=t.root;e&&e.$emit&&e.$emit.apply(e,arguments)},limit:h}),a.extend(p,{limit:h});var m=i(53),v=i(0);var g={props:["data","isSub"],inject:["config","action"],methods:{actionReply:function(){this.$emit("reply")},actionDel:function(){var t=this;t.action.del(t.data,(function(){return t.$emit("delCmt")}))},actionSpam:function(){var t=this;t.action.spam(t.data,(function(){return t.$emit("delCmt")}))}},computed:{isSelf:function(){var t=v.id(this.config.currentUid),e=v.id(this.data.authorId);return t&&t===e},isEntityAuthor:function(){var t=v.id(this.config.currentUid),e=v.id(this.config.entityUid);return t&&t===e},isCmtAuthor:function(){var t=v.id(this.config.entityUid),e=v.id(this.data.authorId);return t&&t===e}}},y=i(1),w=Object(y.a)(g,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t._t("before"),t._v(" "),t.data.isFeedAd?t._e():[(t.config||{}).isDisableReply?t._e():i("a",{attrs:{href:"javascript:void(0);"},on:{click:t.actionReply}},[t._v("回复("+t._s(t.data.commentCnt||0)+")")]),t._v(" "),i("a",{attrs:{href:"javascript:void(0);"},on:{click:function(e){return t.action.like(t.data)}}},[t._v(t._s(t.data.isLiked?"已赞":"赞")+"("+t._s(t.data.likes||0)+")")]),t._v(" "),!t.isSub&&t.config.isNeedShare?i("a",{staticClass:"js-cmt-action-share",attrs:{href:"javascript:void(0);"},on:{click:function(e){return t.action.share(t.data)}}},[t._v("分享")]):t._e(),t._v(" "),t.isSelf||t.isSub&&!t.config.isNeedSubReport?t._e():i("a",{staticClass:"click-del",attrs:{href:"javascript:void(0);"},on:{click:function(e){return t.action.report(t.data)}}},[t._v("举报")]),t._v(" "),(t.config.isAdmin||t.isSelf||t.isEntityAuthor)&&!t.data.isAccepted?i("a",{staticClass:"click-del",attrs:{href:"javascript:void(0);"},on:{click:t.actionDel}},[t._v("删除")]):t._e(),t._v(" "),t.config.isAdmin&&!t.isSub&&t.config.isNeedLitigant?i("a",{attrs:{href:"javascript:void(0);"},on:{click:function(e){return t.action.litigant(t.data)}}},[t._v(t._s(t.data.isLitigant?"取消当事人回复":"当事人回复"))]):t._e(),t._v(" "),t.config.isAdmin&&!t.isSub&&t.config.isNeedWonderful?i("a",{attrs:{href:"javascript:void(0);"},on:{click:function(e){return t.action.wonderful(t.data)}}},[t._v(t._s(t.data.isWonderful?"取消精彩":"设置精彩"))]):t._e(),t._v(" "),t.isSub||!t.config.isAward||!t.isEntityAuthor||!t.config.isAdmin&&t.isCmtAuthor?t._e():i("a",{attrs:{href:"javascript:void(0);"},on:{click:function(e){return t.action.accept(t.data)}}},[t._v("采纳回答")]),t._v(" "),t.config.isAdmin?i("a",{attrs:{href:"javascript:void(0);"},on:{click:t.actionSpam}},[t._v("标记为垃圾")]):t._e()],t._v(" "),t._t("after")],2)}),[],!1,null,null,null).exports,b=i(2),C=i(8),k=i(44),x=i(39),_=i(27);var j={props:["isShowArrow","placeholder","value"],inject:["config"],data:function(){return{isFocus:!1,content:this.value}},mounted:function(){var t=this;t.initVal(),t.$nextTick((function(){t.initIpt(),t.initEmoji()}))},methods:{initVal:function(){var t=this;t.$watch("value",(function(e){return e!==t.content&&(t.content=e)})),t.$watch("content",(function(e){return t.$emit("input",e)}))},initIpt:function(){var t=b(this.$el),e=b(this.$refs.input);e.outerWidth(t.width()),C.txtAutoHeight({el:e}),!(this.config||{}).isNoSubAt&&k.input(e)},initEmoji:function(){var t=this,e=x.show({target:t.$refs.emoji,call:function(e){return x.renderInIpt(t.$refs.input,e)}});t.$ncPushChild(e)},focus:function(){b(this.$refs.input).focus()},show:function(t,e){var i=this;i.$nextTick((function(){var n=b(i.$el);t&&n.hide(),n[t?"slideDown":"slideUp"](150,e)}))},actionSend:function(t){var e="macintosh"===(_.getOs()||{}).os;(e&&t.metaKey||!e&&t.ctrlKey)&&(t.target.blur(),this.$emit("submit"))},actionReply:function(){this.$emit("submit")}},watch:{content:function(){var t=this;t.$nextTick((function(){return C.dispatchEvent(t.$refs.input,"change")}))}}},T=Object(y.a)(j,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"reply-editbox clearfix"},[t.isShowArrow?i("div",{staticClass:"toparrow"}):t._e(),t._v(" "),i("div",{staticClass:"reply-write"},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],ref:"input",staticClass:"reply-input reply-input-textarea","class":t.isFocus?"reply-focus":"",attrs:{placeholder:t.placeholder||"请输入你的观点"},domProps:{value:t.content},on:{focus:function(e){t.isFocus=!0},blur:function(e){t.isFocus=!1},keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.actionSend(e)},input:function(e){e.target.composing||(t.content=e.target.value)}}})]),t._v(" "),i("div",{staticClass:"reply-action clearfix"},[i("a",{ref:"emoji",staticClass:"icon-emotion",attrs:{href:"javascript:void(0);"}}),t._v(" "),i("a",{staticClass:"btn btn-primary reply-btn",attrs:{href:"javascript:void(0);"},on:{click:t.actionReply}},[t._v("回复")])])])])}),[],!1,null,null,null).exports,I={},E=Object(y.a)(I,(function(){var t=this.$createElement;this._self._c;return this._m(0)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("a",{attrs:{href:"javascript:void(0);"}},[e("img",{staticClass:"identity-icon",attrs:{src:"//uploadfiles.nowcoder.com/images/20190708/56_1562592127316_5889949873E3E23C8A0EC0CC8F6042A8"}})])}],!1,null,null,null).exports,S=i(78),L=i(76),$=i(2),D=i(0),P=i(87),A=i(4),R=i(121),U=i(28);var M={props:["data","index","entityId","isPureText"],inject:["config","util"],provide:function(){return{feedUtil:new L.a({context:this})}},components:{Action:w,Identity:m.a,Lord:E,Reply:T,Picture:S.a},data:function(){var t=this.data;return{isShow:!0,isShowReply:this.config.isAutoOpenSubCmt&&t.commentCnt>0,replyContent:""}},beforeCreate:function(){this.$options.components.CmtList=i(84)["default"]},mounted:function(){var t=this;t.$nextTick((function(){t.initCommentCnt(),t.initAd(),t.$emit("itemMounted",t)}))},methods:{initCommentCnt:function(){var t=this;function e(){t.isShowReply&&t.$nextTick((function(){var e=t.$refs.cmtList;e&&e.$watch("totalCnt",(function(){t.data.commentCnt=e.totalCnt}))}))}t.$watch("isShowReply",e),e()},initAd:function(){var t=this,e=$(t.$el),i=t.$refs.adTag;if(!i)return;var n=R.show({target:i,options:[{text:"不感兴趣",value:1}],attach:{extOffset:{left:-1,top:-2}}});n.listen("attachShow",(function(){return i.find("i").removeClass("icon-angle-down").addClass("icon-angle-up")})),n.listen("attachHide",(function(){return i.find("i").removeClass("icon-angle-up").addClass("icon-angle-down")})),n.listen("change",(function(){n.clear(),U.adNotInterest({body:{adId:t.data.id},call:function(i){e.slideUp(150,(function(){t.isShow=!1,n.destroy(),t.$emit("removeAd")}))},error:function(t){return A.alert(t.msg)}})}))},actionReply:function(){var t=this;f.limit(t.data,"clickReply",(function(e){var i=!t.isShowReply;i&&(t.isShowReply=i),t.$nextTick((function(){t.$refs.cmtList.show(i,(function(){t.isShowReply=i,e&&e()}))}))}))},actionDelCmt:function(){var t=this.$parent;t&&t.delCmt&&t.delCmt(this.data.id)},actionSubmitReply:function(){var t=this;t.$nextTick((function(){var e=t.$refs.cmtList;e.addCmt&&f.limit(t.data,"submitReply",(function(i){e.addCmt({isText:!0,content:t.replyContent,toUserId:t.data.authorId,toCommentId:t.data.id,call:function(){return t.replyContent=""},always:i})}))}))}},computed:{canShowFloor:function(){return!this.config.isWonderful&&!this.config.isAccept},mixedContent:function(){var t=this.data.content||"";this.isPureText&&(t=(t=t.replace(/\n/gi,"<br />")).replace(/\s+([^<>]+)(?=<)|\s+([^<>]+)$/g,(function(t){return t.replace(/\s/g,"&nbsp;")})));return t=P.replaceLink(t)},pureContent:function(){var t=D.json(this.data.contentV2,{}).pureText||"";return t=(t=t.replace(/\n/gi,"<br />")).replace(/\s+([^<>]+)(?=<)|\s+([^<>]+)$/g,(function(t){return t.replace(/\s/g,"&nbsp;")})),t=P.replaceLink(t)},pictures:function(){return D.json(this.data.contentV2,{}).imgs||[]},listConf:function(){var t=this.config;return{entityUid:this.data.authorId,extGetListParam:t.extGetListParam}}}},N=Object(y.a)(M,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],staticClass:"answer-list-item clearfix","class":t.config.isNoCopyMark?"":"js-copy-mark",attrs:{"data-mark-info":"作者："+t.data.authorName}},[i("div",{staticClass:"answer-content clearfix"},[i("a",{staticClass:"answer-head","class":t.config.isNoNameCard?"":"js-nc-card",attrs:{"data-card-uid":t.data.authorId,href:t.util.getUserProfileUrl(t.data.authorId),target:"_blank"}},[i("img",{attrs:{alt:t.data.authorName+"头像",src:t.data.headImg}})]),t._v(" "),i("div",{staticClass:"answer-detail"},[i("p",[i("a",{staticClass:"name","class":[t.util.getLevelClass(t.data.honorLevel),t.config.isNoNameCard?"":"js-nc-card"],attrs:{href:t.util.getUserProfileUrl(t.data.authorId),target:"_blank","data-card-uid":t.data.authorId},domProps:{innerHTML:t._s(t.data.authorName)}}),t._v(" "),t._l(t.data.identity,(function(t){return i("Identity",{key:t.level,attrs:{level:t.level,name:t.name,iconCls:t.idenClass}})})),t._v(" "),t.util.isLord(t.data.authorId)?i("Lord"):t._e(),t._v(" "),t.data.isFeedAd?i("span",{ref:"adTag",staticClass:"post-ad-tag"},[t._v("广告"),i("i",{staticClass:"icon-angle-down"})]):t._e(),t._v(" "),t.canShowFloor&&(t.index||0===t.index)?i("span",{"class":t.data.isWonderful?"post-floor-green":"post-floor"},[t._v(t._s(t.index+1)+"#")]):t._e(),t._v(" "),t.config.isWonderful||!t.data.isAccepted||t.config.isNoMarkAccept?t._e():i("span",{staticClass:"plusFine accept-mini-tag float-right"},[t._v("已采纳")]),t._v(" "),t.data.isLitigant?i("span",{staticClass:"lz-reply"},[i("span",{staticClass:"lz-reply-txt"},[t._v("当事人回复")])]):t._e()],2),t._v(" "),t.data.contentV2?i("div",{staticClass:"answer-brief nc-post-content",domProps:{innerHTML:t._s(t.pureContent)}}):i("div",{staticClass:"answer-brief nc-post-content",domProps:{innerHTML:t._s(t.mixedContent)}}),t._v(" "),t.pictures.length?i("Picture",{attrs:{items:t.pictures}}):t._e(),t._v(" "),i("Action",{staticClass:"answer-legend",attrs:{data:t.data},on:{reply:t.actionReply,delCmt:t.actionDelCmt},scopedSlots:t._u([{key:"before",fn:function(){return[i("span",{staticClass:"answer-time"},[t._v("发表于 "+t._s(t.util.formTime(t.data.createTime)))])]},proxy:!0}])}),t._v(" "),!t.data.isFeedAd&&t.isShowReply?i("CmtList",{ref:"cmtList",staticClass:"reply-box",attrs:{id:t.data.id,type:"2",pageSize:10,isSub:!0,listCls:"reply-list",config:t.listConf},scopedSlots:t._u([{key:"none",fn:function(){return[i("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]})]},proxy:!0},(t.config||{}).isDisableReply?null:{key:"footer",fn:function(){return[i("Reply",{staticClass:"mt2",on:{submit:t.actionSubmitReply},model:{value:t.replyContent,callback:function(e){t.replyContent=e},expression:"replyContent"}})]},proxy:!0}],null,!0)}):t._e()],1)])])}),[],!1,null,null,null).exports,F=i(87),q=i(0);var H={props:["data","index","entityId","isPureText"],inject:["config","util"],components:{Reply:T,Action:w,Lord:E,Identity:m.a},data:function(){return{isShowReply:!1,replyContent:""}},methods:{actionReply:function(){var t=this;f.limit(t.data,"clickReply",(function(e){var i=!t.isShowReply;i&&(t.isShowReply=i),t.$nextTick((function(){var n=t.$refs.reply;n.show(i,(function(){t.isShowReply=i,i&&n.focus(),e&&e()}))}))}))},actionDelCmt:function(){var t=this.$parent;t&&t.delCmt&&t.delCmt(this.data.id)},actionSubmitReply:function(){var t=this,e=t.$parent;e&&e.addCmt&&f.limit(t.data,"submitReply",(function(i){e.addCmt({isText:!0,content:t.replyContent,toUserId:t.data.authorId,toCommentId:t.data.id,call:function(){t.replyContent="",t.actionReply()},always:i})}))}},computed:{content:function(){var t=(this.data.content||"").replace(/\n/gi,"<br />");return t=t.replace(/\s+([^<>]+)(?=<)|\s+([^<>]+)$/g,(function(t){return t.replace(/\s/g,"&nbsp;")})),t=F.replaceLink(t)},isToUser:function(){var t=this.data;return t.toUserId&&q.id(t.toCommentId)!==q.id(this.entityId)}}},O=Object(y.a)(H,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"reply-list-item"},[i("div",{staticClass:"reply-main clearfix"},[i("div",{staticClass:"reply-person",staticStyle:{"margin-right":"5px"}},[i("a",{"class":[t.util.getLevelClass(t.data.honorLevel),t.config.isNoNameCard?"":"js-nc-card"],attrs:{href:t.util.getUserProfileUrl(t.data.authorId),target:"_blank","data-card-uid":t.data.authorId},domProps:{innerHTML:t._s(t.data.authorName)}}),t._v(" "),t._l(t.data.identity,(function(t){return i("Identity",{key:t.level,attrs:{level:t.level,name:t.name,iconCls:t.idenClass}})})),t._v(" "),t.util.isLord(t.data.authorId)?i("Lord"):t._e(),t._v(" "),t.isToUser?[t._v("\n                回复 \n                "),i("a",{"class":[t.util.getLevelClass(t.data.toUserHonorLevel),t.config.isNoNameCard?"":"js-nc-card"],attrs:{href:t.util.getUserProfileUrl(t.data.toUserId),target:"_blank","data-card-uid":t.data.toUserId},domProps:{innerHTML:t._s(t.data.toUserName)}}),t._v(" "),t._l(t.data.toUserIdentity,(function(t){return i("Identity",{key:"si"+t.level,attrs:{level:t.level,name:t.name,iconCls:t.idenClass}})})),t._v(" "),t.util.isLord(t.data.toUserId)?i("Lord"):t._e()]:t._e(),t._v("\n            ：\n        ")],2),t._v(" "),i("div",{staticClass:"reply-content",domProps:{innerHTML:t._s(t.content)}})]),t._v(" "),i("Action",{staticClass:"answer-legend reply-info",attrs:{isSub:!0,data:t.data},on:{reply:t.actionReply,delCmt:t.actionDelCmt},scopedSlots:t._u([{key:"before",fn:function(){return[i("span",{staticClass:"answer-time"},[t._v(t._s(t.util.formTime(t.data.createTime)))])]},proxy:!0}])}),t._v(" "),t.isShowReply&&!(t.config||{}).isDisableReply?i("Reply",{ref:"reply",attrs:{isShowArrow:!0,placeholder:"回复"+t.data.authorName},on:{submit:t.actionSubmitReply},model:{value:t.replyContent,callback:function(e){t.replyContent=e},expression:"replyContent"}}):t._e()],1)}),[],!1,null,null,null).exports,z=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},W=i(59),B=i(2),G=i(0),V=i(12),J=i(63),Q=i(8),K=i(48),X=i(4),Y=i(41),Z=i(28),tt=i(14),et=i(29);function it(t){var e=this.fullConf,i="/profile/"+t;return e.getUserProfileUrl&&e.getUserProfileUrl(t)||i}function nt(t){var e=this.fullConf,i="level-color-"+t;return t?e.getLevelClass&&e.getLevelClass(t)||i:""}function ot(t){var e=this.fullConf;return G.id(t)===G.id(e.entityUid)}function at(t){return V.relate(new Date(t))}var st={show:function(t){return new(et.extend(this))(t)},props:["id","type","order","pageSize","isSub","listCls","config"],components:{Pager:n.a},provide:function(){return this.isSub?undefined:{config:this.config||{},action:new f({root:this}),util:{getUserProfileUrl:G.bind(it,this),getLevelClass:G.bind(nt,this),isLord:G.bind(ot,this),formTime:G.bind(at,this)}}},data:function(){var t=this.config||{};return{items:[],currentPage:+t.currentPage||1,totalCnt:-1,totalPage:0,error:"",isLoaded:!1,isNeedShowAd:!0,fullConf:t}},mounted:function(){var t=this,e=t.fullConf,i=G.id(e.commentId);if(!i)return t.refresh(t.currentPage,(function(){return t.isLoaded=!0}));Z.cmtGetPageNumV2({query:{pageSize:+t.pageSize||20,order:t.order||1,entityId:t.id,entityType:t.type,commentId:i},call:function(n){var o=n.data;t.currentPage=+o.pageNum,i=e.commentId=o.toFirstLevelCommentId},always:function(){t.refresh(t.currentPage,(function(){t.isLoaded=!0,i&&window.setTimeout((function(){return t.scrollToId(i,!0,!0)}),1e3),t.$nextTick((function(){var e=t.getItem(i);e&&!e.isShowReply&&e.actionReply&&e.actionReply()}))}))}})},methods:{refresh:function(t,e){var i=this,n=i.fullConf,o=+i.pageSize||20;(t=+t||1)<0&&i.totalCnt>=0&&(t=J.page(i.totalCnt,o));var a=n.isAccept?"cmtGetAcceptedList":n.isWonderful?"cmtGetWonderfulList":"cmtGetByPageV2";Z[a]({query:z({entityId:i.id,entityType:i.type,page:t,pageSize:o,order:i.order||1},n.extGetListParam),call:function(o){var a=o.data||{},s=a.comments||[];if(-1===t||0!==a.totalCnt&&0===s.length)return i.refresh(a.totalPage,e);G.forEach(s,(function(t,e){return t.floorIndex=i.getIndex(e)})),i.isNeedShowAd&&i.extCmts.length>0&&s.length>0&&t===(+n.currentPage||1)&&(s=i.extCmts.concat(s)),i.currentPage=t,i.totalCnt=a.totalCnt,i.totalPage=a.totalPage,i.items=s,i.error="",e&&e(),i.$emit("listDataChange",{totalCount:i.totalCnt})},error:function(t){return i.error=t.msg}})},show:function(t,e){var i=this;i.$nextTick((function(){var n=B(i.$el);!t&&n.slideUp(150,e),t&&(n.show(),e&&e())}))},addCmt:function(t){var e=this,i=e.fullConf,n=t.content||"",o=t.isText?n:n.replace(/<\s*\/?\s*[a-z1-9]+.*?>/gi,""),a=/<img.+>/gi.test(n);if(a||o)if(!a&&i.isAlertWatering&&o.length<5&&!K.get("noReplyIrrigationAlert")){var s=X.confirm("灌水的话可能会被管理员删除的，确定现在提交吗？",c,t.always),r=new Y({renderTo:s.popupFooter,text:"以后不再提示"});r.listen("change",(function(){return K.set("noReplyIrrigationAlert",r.isChecked())}))}else c();else X.alert("内容不能为空"),t.always&&t.always();function c(){function o(){var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},o=G.id(n.data);e.totalCnt++,e.refresh(-1,(function(){i.isNoReplyScroll||(e.isSub?e.scrollToTop():o&&e.scrollToId(o,!1,!0))})),t.call&&t.call(n)}t.isForwardFeed?o():Z.cmtAdd({captcha:{type:tt.captcha.postComment},body:{entityType:e.type,entityOwnerId:i.entityUid||0,entityId:e.id,toFeed:t.toFeed?"true":"false",commentContent:n,contentV2:t.contentV2,toUserId:t.toUserId,toCommentId:t.toCommentId},call:o,always:t.always})}},delCmt:function(t){var e=this;e.$nextTick((function(){var i=e.getItem(t);i&&B(i.$el).slideUp(150,(function(){return e.refresh(e.currentPage)}))}))},getItem:function(t){t=G.id(t);var e=this.$refs.item||[];return G.find(e,(function(e){return G.id(e.data.id)===t}))},getIndex:function(t){var e=G.id(this.order)||"1",i=+this.pageSize||20,n=t+(this.currentPage-1)*i;return"0"===e?this.totalCnt-n-1:"1"===e?n:undefined},scrollToTop:function(t){var e=this;e.$nextTick((function(){var i=e.fullConf,n=B(e.$el).parent();Q.scrollToEl({el:n,scrollEl:Q.getScrollParent(n),animation:!!t,ext:+i.extHeight||0})}))},scrollToId:function(t,e,i){var n=this;if(!t)return;n.$nextTick((function(){var o=n.fullConf,a=n.getItem(t);if(a){var s=B(a.$el);Q.scrollToEl({el:s,scrollEl:Q.getScrollParent(s),animation:!!e,ext:+o.extHeight||0}),i&&Q.highLight({el:s})}}))},actionItemMounted:function(t){this.$emit("itemMounted",t)},actionRemoveAd:function(){this.isNeedShowAd=!1}},watch:{currentPage:function(t){var e=this;e.refresh(t,(function(){return e.scrollToTop()}))},order:function(t,e){if(G.id(t)===G.id(e))return;this.refresh(1)},items:function(t){if(0===t.length)return;W.use("ncPlugin/highlighter/highlighter",(function(t){return t.init()}))}},computed:{cpn:function(){return this.isSub?O:N},extCmts:function(){var t=this.fullConf.extCmts;return t?G.isArray(t)?t:[t]:[]}}},rt=Object(y.a)(st,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.isLoaded?t.error?i("div",{staticStyle:{padding:"20px 0","text-align":"center","font-size":"14px"}},[t._v(t._s(t.error))]):[t.items.length>0?i("div",{"class":t.listCls||"answer-list"},[t._l(t.items,(function(e,n){return[t._t("item",[i(t.cpn,{key:e.id,ref:"item",refInFor:!0,tag:"component",attrs:{data:e,index:e.floorIndex,entityId:t.id,isPureText:t.isSub||t.fullConf.isPureText},on:{itemMounted:t.actionItemMounted,removeAd:t.actionRemoveAd}})],{data:e,index:n})]}))],2):t._t("none",[t._m(0)]),t._v(" "),i("Pager",{attrs:{total:t.totalPage},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}}),t._v(" "),t._t("footer")]:i("div",{staticStyle:{padding:"20px 0","text-align":"center","font-size":"14px"}},[t._v("加载中...")])],2)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"blank-box"},[e("div",{staticClass:"blank-img"},[e("img",{staticStyle:{width:"150px",height:"151px"},attrs:{src:"//static.nowcoder.com/images/sofa.png"}})]),this._v(" "),e("p",[this._v("帖子还没人回复，快来抢沙发！")])])}],!1,null,null,null);e["default"]=rt.exports},9:function(t,e,i){var n=i(7);t.exports={url:{newClockRecord:"/clock/new",getTodayClockInfo:"/clock/todayInfo",getDayInfo:"/clock/dayInfo",getMonthInfo:"/clock/monthInfo",getShareImage:"/clock/share-image"}},n.add(t.exports,t.exports.url)},97:function(t,e,i){var n=i(7);t.exports={url:{getNoticeGroup:"/sns/notice/get-notice-group",getNoticeList:"/sns/notice/get-notice-list-new-v2",queryUnreadCount:"/sns/message/unread-count-v2",delMessage:"/sns/message/del-msg",delConversation:"/sns/message/del-conversation",sendMessage:"/sns/message/send-msg",queryUsers:"/sns/message/query-users",queryRecentlyUses:"/sns/message/recently-sent-users",atSuggest:"/at/suggest",setAllRead:"/sns/message/#{uid}/all-read",getConversationList:"/sns/message/#{uid}/get-conversation-list",getMsgList:"/sns/message/#{uid}/get-msg-list"}},n.add(t.exports,t.exports.url)}},[[399,1,0]]]);